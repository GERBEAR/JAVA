/**
 * @fileoverview dragscroll - scroll area by dragging
 * @version 0.0.5
 * 
 * @license MIT, see http://github.com/asvd/intence
 * @copyright 2015 asvd <heliosframework@gmail.com> 
 
 * MODIFIED ******
 */

define("modules/calendar-result/calendar-result",["jquery-full","helpers/helpers"],function(e,t){"use strict";var n={$calendarResultZones:null,dropdownAjaxStorage:{},initElements:function(){this.$calendarResultZones=e(".results_teamsports_v8_5,                                                .qualification_phase_teamsports_v8_5,                                                .final_phase_teamsports_v8_5,                                                .brackets_v8_5")},run:function(){this.initElements(),this.$calendarResultZones.length>0&&this.$calendarResultZones.each(function(e,r){var i={navId:"results-match-nav",zoneId:r.className},s=n.dropdownAjaxStorage.hasOwnProperty(r.className)&&n.dropdownAjaxStorage[r.className]!==undefined;if(!s){var o=new t.dropdownAjax;n.dropdownAjaxStorage[r.className]=o.init(i)}else n.dropdownAjaxStorage[r.className].reflow()})}};n.run(),e.subscribe("subnavigation.tabInit:Brackets",function(){n.run()});var r={reflow:function(){n.run()}};return r}),function(e,t){typeof define=="function"&&define.amd?define("modules/standings/dragscroll",["exports"],t):typeof exports!="undefined"?t(exports):t(e.dragscroll={})}(this,function(e){var t=window,n=document,r="mousemove",i="mouseup",s="mousedown",o="EventListener",u="add"+o,a="remove"+o,f=[],l=function(e,o){for(e=0;e<f.length;)o=f[e++],o[a](s,o.md,0),t[a](i,o.mu,0),t[a](r,o.mm,0);f=n.getElementsByClassName("dragscroll");for(e=0;e<f.length;)(function(e,n,o,a){e[u](s,e.md=function(e){if(e.target.offsetWidth>e.target.clientWidth&&e.offsetX>e.target.clientWidth||e.target.offsetHeight>e.target.clientHeight&&e.offsetY>e.target.clientHeight)return;a=1,n=e.clientX,o=e.clientY,e.preventDefault(),e.stopPropagation()},0),t[u](i,e.mu=function(){a=0},0),t[u](r,e.mm=function(t,r){r=e.scroller||e,a&&(r.scrollLeft-=-n+(n=t.clientX),r.scrollTop-=-o+(o=t.clientY))},0)})(f[e++])};n.readyState!="complete"&&t[u]("load",l,0),e.reset=l}),define("modules/standings/brackets",["jquery-full","helpers/helpers","modules/standings/dragscroll"],function(e,t,n){"use strict";var r=null,i=null,s=null,o=null,u=null,a=0,f={initElements:function(){return r=t.modals.get("modal_fullscreen-brackets"),r!==undefined?(i=r.getElement().find(".modal__content"),s=i.find(".bracket-matches-wrapper"),o=i.find(".bracket-rounds"),u=s.find(".match-sets"),!0):!1},initEvents:function(){i.on("scroll",f.adjustHeaderPosition),r.onAfterOpen(function(){a=i.find(".modal-header").height(),t.lazyload.reflowIn(i),f.init(),n.reset()}),u.find(".player, .team, .match-sets__score").on("mouseenter",function(e){f.highlightPlayer(this,!0)}).on("mouseleave",function(e){f.highlightPlayer(this,!1)})},initData:function(){u.each(function(t,n){var r=e(n),i=r.find(".player, .team"),s=r.find(".match-sets__score"),o="";i.each(function(t,n){var r=e(n),u={playerName:r.text().trim().replace("Â ",""),playerWon:i.length===1?!0:r.hasClass("match-sets__participant--win")};r.data(u),s.eq(t).data(u),o+=u.playerName}),r.data({matchPlayerNames:o})})},adjustHeaderPosition:function(){var e=i.scrollTop(),n=0;e>a?n=e-a*2:n=e,o.css({top:n}),t.lazyload.reflowIn(i)},highlightPlayer:function(t,n){var r=e(t),i=u.has(t);if(r.data("playerName")==="")return!1;var s=u.filter(function(){var t=e(this);return t.data("matchPlayerNames").indexOf(r.data("playerName"))!==-1});s.toggleClass("highlight-all-lines").toggleClass("highlight-text"),r.data("playerWon")===!1?i.toggleClass("highlight-separator").removeClass("highlight-all-lines"):s.last().toggleClass("highlight-separator").removeClass("highlight-all-lines")},init:function(){i.addClass("dragscroll").find('[class^="fullscreen--"]').css({height:s.find(".bracket-round--1").height()+150,overflow:"hidden"})},run:function(){this.initElements()&&(this.initData(),this.initEvents())}},l={};return f.run(),l}),define("modules/nav-tab-dropdown",["helpers/helpers","jquery-full"],function(e,t){"use strict";var n={elements:{$dropdown:null,$dropdownTitle:null,$navTabsWrapper:null},initElements:function(e){this.elements.$navTabsWrapper=t("#"+e.navTabsId),this.elements.$dropdown=this.elements.$navTabsWrapper.find(".nav-tab__dropdown:first"),this.elements.$dropdownTitle=this.elements.$navTabsWrapper.find(".nav-tab__dropdown-text:first")},initEvents:function(){var e=this;e.elements.$dropdown.on("click",function(){e.elements.$navTabsWrapper.toggleClass("nav-tab__dropdown--open")}),e.elements.$navTabsWrapper.on("click","li",function(){var n=t(this).text();e.elements.$navTabsWrapper.removeClass("nav-tab__dropdown--open"),e.elements.$dropdownTitle.text(n)})},init:function(e){this.initElements(e),this.initEvents()}};return{init:function(e){n.init(e)}}}),define("modules/standings/tablesorter",["jquery-full","helpers/helpers"],function(e,t){"use strict";var n=null,r=null,i=null,s={nonSortableColumns:["position","team","last5","player","time","no-sort"],initElements:function(t){n=e(t.tableSelector);if(n.data("no-sort")!==undefined)return;return r=n.find("tr:first-child > th"),n.length>0?!0:!1},getSortHeaders:function(){var e={},t=this;return r.each(function(n,r){e[n]={sorter:!0},t.nonSortableColumns.forEach(function(t,i){r.className.indexOf(t)!==-1&&(e[n]={sorter:!1})})}),e},getDefaultSort:function(){var e=[],t=r.filter("[class*='--main']"),n=r.index(t),i=n>0&&t[0].className.indexOf("sort-asc")>0?0:1;return n>0?e.push([n,i]):e.push([r.length-1,i]),e},onSortEnd:function(){var n=e(this),r=n.find("th"),i=r.index(r.filter(".sort"));n.find("th.active-column, td.active-column").removeClass("active-column"),n.find("th:nth-child("+(i+1)+"), td:nth-child("+(i+1)+")").addClass("active-column"),t.lazyload.reflowIn(n)},run:function(){n.tablesorter({headers:i,sortList:this.getDefaultSort(),tabIndex:!1,cssAsc:"sort asc",cssDesc:"sort desc",cssHeader:"sort",debug:!1,sortInitialOrder:"desc"}).bind("sortEnd",this.onSortEnd)},init:function(e){if(this.initElements(e)){var t;i=this.getSortHeaders(),t=Object.keys(i).filter(function(e){return i[e].sorter===!0}),r.length>=3&&t.length>0&&this.run()}}};return{init:function(e){s.init(e)}}}),define("modules/standings/standings",["jquery-full","modules/nav-tab-dropdown","modules/standings/tablesorter","helpers/helpers"],function(e,t,n,r){"use strict";var i={init:function(){t.init({navTabsId:"standings-tabs"}),n.init({tableSelector:".standing-table"});var i=r.navTabs.getElements(e("#standings-tabs a.has-relation"));i.forEach(function(t,r){var i=t.getElem().getContentId();(function(t,r){t.ajax.onAfterAjaxRequest(function(){var t=e('.tab-content[data-navtab-content-id="'+r+'"] .standing-table');n.init({tableSelector:t})})})(t,i)})}};i.init(),e.subscribe("subnavigation.tabInit:Brackets",function(){r.navTabs.reflow(),i.init(),e.publish("subnavigation.reflow")})}),define("data",function(){});