/* 
    AddThisEvent v1.5.8 <http://addthisevent.com>
    Copyright (c) 2012-2014 Michael Nilsson
    */

define("libs/add-this-event",[],function(){function $d(e){return document.getElementById(e)}var _image_path="http://addthisevent.com/gfx/icon-calendar-t1.png",_ate_license="",_ate_mouse=!1,_ate_css="true",_ate_callback="",_ate_dropdown="",_ate_lbl_outlook="Outlook Calendar",_ate_lbl_google="Google Calendar",_ate_lbl_yahoo="Yahoo Calendar",_ate_lbl_hotmail="Hotmail Calendar",_ate_lbl_ical="iCal Calendar",_ate_lbl_fb_event="Facebook Event",_ate_show_outlook=!0,_ate_show_google=!0,_ate_show_yahoo=!0,_ate_show_hotmail=!0,_ate_show_ical=!0,_ate_show_facebook=!0,_d_rd=!1,addthisevent=function(){var C=!1,dropzind=999999,dropzcx=1,olddrop="",dropmousetim,css1=!1,css2=!1;return{generate:function(){try{_image_path=_image_path}catch(e){_image_path="http://addthisevent.com/gfx/icon-calendar-t1.png"}try{_ate_license=_license}catch(e){}try{_ate_mouse=_mouse}catch(e){}try{_ate_css=_css}catch(e){}var t=addthisevent.glicense(_ate_license),n=document.getElementsByTagName("*");for(var r=0;r<n.length;r+=1){var i="",s=!1,o=n[r].className,u="";if(o=="addthisevent"){var a=n[r].getElementsByTagName("span");for(var f=0;f<a.length;f+=1){a[f].className=="_url"&&(a[f].style.display="none"),a[f].className=="_start"&&(a[f].style.display="none",i+="&dstart="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_end"&&(a[f].style.display="none",i+="&dend="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_zonecode"&&(a[f].style.display="none",i+="&dzone="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_summary"&&(a[f].style.display="none",i+="&dsum="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_description"&&(a[f].style.display="none",i+="&ddesc="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_location"&&(a[f].style.display="none",i+="&dloca="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_organizer"&&(a[f].style.display="none",i+="&dorga="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_organizer_email"&&(a[f].style.display="none",i+="&dorgaem="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_attendees"&&(a[f].style.display="none",i+="&datte="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_all_day_event"&&(a[f].style.display="none",i+="&dallday="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_date_format"&&(a[f].style.display="none",i+="&dateformat="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_alarm_reminder"&&(a[f].style.display="none",i+="&alarm="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_recurring"&&(a[f].style.display="none",i+="&drule="+encodeURIComponent(a[f].innerHTML)),a[f].className=="_uid"&&(a[f].style.display="none",i+="&uid="+encodeURIComponent(a[f].innerHTML));if(a[f].className=="_facebook_event"&&a[f].innerHTML!=""){a[f].style.display="none";var l=a[f].innerHTML.replace(/ /gi,"");i+="&fbevent="+encodeURIComponent(l),s=!0}}t&&(i+="&credits=false"),i=i.replace(/'/gi,"Â´");if(_ate_dropdown!=""){_ate_dropdown+=",";var c=_ate_dropdown.split(",");for(var h=0;h<c.length;h+=1)_ate_show_outlook&&c[h]=="outlook"&&(u+='<span class="ateoutlook" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'outlook','"+i+"');\">"+_ate_lbl_outlook+"</span>"),_ate_show_google&&c[h]=="google"&&(u+='<span class="ategoogle" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'google','"+i+"');\">"+_ate_lbl_google+"</span>"),_ate_show_yahoo&&c[h]=="yahoo"&&(u+='<span class="ateyahoo" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'yahoo','"+i+"');\">"+_ate_lbl_yahoo+"</span>"),_ate_show_hotmail&&c[h]=="hotmail"&&(u+='<span class="atehotmail" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'hotmail','"+i+"');\">"+_ate_lbl_hotmail+"</span>"),_ate_show_ical&&c[h]=="ical"&&(u+='<span class="ateical" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'ical','"+i+"');\">"+_ate_lbl_ical+"</span>"),s&&c[h]=="facebook"&&_ate_show_facebook&&c[h]=="facebook"&&(u+='<span data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'facebook','"+i+"');\">"+_ate_lbl_fb_event+"</span>")}else _ate_show_outlook&&(u+='<span class="ateoutlook" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'outlook','"+i+"');\">"+_ate_lbl_outlook+"</span>"),_ate_show_google&&(u+='<span class="ategoogle" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'google','"+i+"');\">"+_ate_lbl_google+"</span>"),_ate_show_yahoo&&(u+='<span class="ateyahoo" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'yahoo','"+i+"');\">"+_ate_lbl_yahoo+"</span>"),_ate_show_hotmail&&(u+='<span class="atehotmail" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'hotmail','"+i+"');\">"+_ate_lbl_hotmail+"</span>"),_ate_show_ical&&(u+='<span class="ateical" data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'ical','"+i+"');\">"+_ate_lbl_ical+"</span>"),s&&_ate_show_facebook&&(u+='<span data-ref="'+dropzcx+"\" onclick=\"addthisevent.cli(this,'facebook','"+i+"');\">"+_ate_lbl_fb_event+"</span>");t||(u+='<em class="copyx"><em class="brx"></em><em class="frs" data-ref="'+dropzcx+'" onclick="addthisevent.cli(this,\'home\');">AddThisEvent</em></em>'),n[r].id="atedrop"+dropzcx,n[r].className="addthisevent-drop",n[r].title="";var p=n[r].getAttribute("data-direct");p?(n[r].setAttribute("data-url",i),n[r].setAttribute("data-ref",dropzcx),n[r].onclick=function(){return addthisevent.direct(this),!1}):_ate_mouse?(n[r].onmouseover=function(){clearTimeout(dropmousetim),addthisevent.show(this,"auto","auto",!0)},n[r].onmouseout=function(){dropmousetim=setTimeout(function(){addthisevent.out()},200)},n[r].onclick=function(){return!1}):n[r].onclick=function(){return addthisevent.show(this,"auto","auto"),!1};var d=n[r],v=document.createElement("span");v.id="atedrop"+dropzcx+"-drop",v.className="addthisevent_dropdown",v.innerHTML=u,d.appendChild(v),dropzcx++}}_ate_css=="false"?addthisevent.trycss():addthisevent.applycss(t)},direct:function(e){var t=e.getAttribute("data-url"),n=e.getAttribute("data-direct");addthisevent.cli(e,n,t)},cli:function(f,a,b){var c="",ref=location.href,nw=!0,now=new Date;a=="outlook"&&(c="http://generate.addthisevent.com/?service=OUTLOOK"+b+"&reference="+ref,nw=!1),a=="google"&&(c="http://generate.addthisevent.com/?service=GOOGLE"+b+"&reference="+ref),a=="yahoo"&&(c="http://generate.addthisevent.com/?service=YAHOO"+b+"&reference="+ref),a=="hotmail"&&(c="http://generate.addthisevent.com/?service=HOTMAIL"+b+"&reference="+ref),a=="ical"&&(c="http://generate.addthisevent.com/?service=ICAL"+b+"&reference="+ref,nw=!1),a=="facebook"&&(c="http://generate.addthisevent.com/?service=FACEBOOK"+b+"&reference="+ref),a=="home"&&(c="http://addthisevent.com/");if(c!=""){if(a!="home"){var d=f.getAttribute("data-ref"),g=$d("atedrop"+d);if(g){var h=g.getAttribute("data-track");if(h!=null){h=h.replace(/ate-calendar/gi,a);try{eval(h)}catch(e){}}}}nw?window.open(c):location.href=c}if(_ate_callback)for(var i=0;i<_ate_callback.length;i++)try{eval(_ate_callback[i])}catch(e){alert(e.description)}},applycss:function(e){if(!css2){var t;t=".addthisevent-drop {display:inline-block;position:relative;font-family:arial;color:#333!important;background:#f4f4f4 url("+_image_path+") no-repeat 9px 50%;text-decoration:none!important;border:1px solid #d9d9d9;color:#555;font-weight:bold;font-size:14px;text-decoration:none;padding:9px 12px 8px 35px;-moz-border-radius:2px;-webkit-border-radius:2px;}",t+=".addthisevent-drop:hover {border:1px solid #aab9d4;color:#555;font-weight:bold;font-size:14px;text-decoration:none!important;}",t+=".addthisevent-drop:active {top:1px;}",t+=".addthisevent-selected {background-color:#f7f7f7;}",e?t+=".addthisevent_dropdown {width:200px;position:absolute;z-index:99999;padding:0px 0px 0px 0px;background:#fff;text-align:left;display:none;margin-top:-2px;margin-left:-1px;border-top:1px solid #c8c8c8;border-right:1px solid #bebebe;border-bottom:1px solid #a8a8a8;border-left:1px solid #bebebe;-moz-border-radius:2px;-webkit-border-radius:2px;-webkit-box-shadow:1px 3px 6px rgba(0,0,0,0.15);-moz-box-shadow:1px 3px 6px rgba(0,0,0,0.15);box-shadow:1px 3px 6px rgba(0,0,0,0.15);}":t+=".addthisevent_dropdown {width:200px;position:absolute;z-index:99999;padding:6px 0px 0px 0px;background:#fff;text-align:left;display:none;margin-top:-2px;margin-left:-1px;border-top:1px solid #c8c8c8;border-right:1px solid #bebebe;border-bottom:1px solid #a8a8a8;border-left:1px solid #bebebe;-moz-border-radius:2px;-webkit-border-radius:2px;-webkit-box-shadow:1px 3px 6px rgba(0,0,0,0.15);-moz-box-shadow:1px 3px 6px rgba(0,0,0,0.15);box-shadow:1px 3px 6px rgba(0,0,0,0.15);}",t+=".addthisevent_dropdown span {width:175px;display:block;cursor:pointer;line-height:110%;background:#fff;text-decoration:none;font-size:12px;color:#6d84b4;padding:8px 10px 9px 15px;}",t+=".addthisevent_dropdown span:hover {background:#f4f4f4;color:#6d84b4;text-decoration:none;font-size:12px;}",t+=".addthisevent span {display:none!important;}",t+=".addthisevent-drop ._url,.addthisevent-drop ._start,.addthisevent-drop ._end,.addthisevent-drop ._zonecode,.addthisevent-drop ._summary,.addthisevent-drop ._description,.addthisevent-drop ._location,.addthisevent-drop ._organizer,.addthisevent-drop ._organizer_email,.addthisevent-drop ._facebook_event,.addthisevent-drop ._all_day_event {display:none!important;}",t+=".addthisevent_dropdown .copyx {width:200px;height:21px;display:block;position:relative;cursor:default;}",t+=".addthisevent_dropdown .brx {width:180px;height:1px;overflow:hidden;background:#e0e0e0;position:absolute;z-index:100;left:10px;top:9px;}",t+=".addthisevent_dropdown .frs {position:absolute;top:5px;cursor:pointer;right:10px;padding-left:10px;font-style:normal;font-weight:normal;text-align:right;z-index:101;line-height:110%;background:#fff;text-decoration:none;font-size:9px;color:#cacaca;}",t+=".addthisevent_dropdown .frs:hover {color:#6d84b4;}";var n=document.createElement("style");n.type="text/css",n.id="ate_css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(n),css2=!0}},trycss:function(){if(!css1){try{var e=".addthisevent {visibility:hidden;}";e+=".addthisevent-drop ._url,.addthisevent-drop ._start,.addthisevent-drop ._end,.addthisevent-drop ._zonecode,.addthisevent-drop ._summary,.addthisevent-drop ._description,.addthisevent-drop ._location,.addthisevent-drop ._organizer,.addthisevent-drop ._organizer_email,.addthisevent-drop ._attendees,.addthisevent-drop ._facebook_event,.addthisevent-drop ._all_day_event {display:none!important;}";var t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}catch(n){}css1=!0}},removecss:function(){try{return(hdx=$d("ate_css"))?hdx.parentNode.removeChild(hdx):!1}catch(e){}},show:function(e,t,n,r){var i=e.id,s=$d(i),o=$d(i+"-drop");if(s&&o){olddrop!=i&&addthisevent.hide(olddrop);var u=addthisevent.getstyle(o,"display");try{e.blur()}catch(a){}if(u=="block")r||addthisevent.hide(i);else{olddrop=i,s.className="addthisevent-drop addthisevent-selected",s.style.zIndex=dropzind++,o.style.left="0px",o.style.top="0px",o.style.display="block",setTimeout(function(){addthisevent.tim()},50),C=!1;var f=parseInt(s.offsetHeight),l=parseInt(s.offsetWidth),c=parseInt(o.offsetHeight),h=parseInt(o.offsetWidth),p=addthisevent.viewport(),d=p.split("/"),v=parseInt(d[0]),m=parseInt(d[1]),g=parseInt(d[2]),y=parseInt(d[3]),b=addthisevent.elementposition(o),w=b.split("/"),E=parseInt(w[0]),S=parseInt(w[1]),x=S+c,T=m+y,N=E+h,k=v+g,L=0,A=0;t=="down"&&n=="left"?(L="0px",A=f+"px"):t=="up"&&n=="left"?(L="0px",A=-c+"px"):t=="down"&&n=="right"?(L=-(h-l)+"px",A=f+"px"):t=="up"&&n=="right"?(L=-(h-l)+"px",A=-c+"px"):t=="auto"&&n=="left"?(L="0px",x>T?A=-c+"px":A=f+"px"):t=="auto"&&n=="right"?(L=-(h-l)+"px",x>T?A=-c+"px":A=f+"px"):(x>T?A=-c+"px":A=f+"px",N>k?L=-(h-l)+"px":L="0px"),o.style.left=L,o.style.top=A,document.addEventListener?document.addEventListener("click",function(){addthisevent.force(i)},!1):document.attachEvent?document.attachEvent("onclick",function(){addthisevent.force(i)}):document.onclick=function(){addthisevent.force(i)}}}},force:function(e){var t=$d(e),n=$d(e+"-drop");t&&n&&C&&n.style.display=="block"&&setTimeout(function(){addthisevent.hide(e)},200)},out:function(){addthisevent.force(olddrop)},hide:function(e){var t=$d(e),n=$d(e+"-drop");t&&n&&(t.className="addthisevent-drop",n.style.display="none",n.style.zIndex="")},tim:function(){C=!0},viewport:function(){var e=0,t=0,n=0,r=0;return typeof window.innerWidth=="number"?(e=window.innerWidth,t=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(e=document.documentElement.clientWidth,t=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(e=document.body.clientWidth,t=document.body.clientHeight),document.all?(r=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,n=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop):(r=window.pageXOffset,n=window.pageYOffset),e+"/"+t+"/"+r+"/"+n},elementposition:function(e){var t=0,n=0;if(e.offsetParent){t=e.offsetLeft,n=e.offsetTop;while(e=e.offsetParent)t+=e.offsetLeft,n+=e.offsetTop}return t+"/"+n},getstyle:function(e,t){var n=e,r;return n.currentStyle?r=n.currentStyle[t]:window.getComputedStyle&&(r=document.defaultView.getComputedStyle(n,null).getPropertyValue(t)),r},glicense:function(e){var t=location.href,n=!0,r=e,i=r.length;if(i==20){var s=r.substring(0,1),o=r.substring(9,10),u=r.substring(17,18);s!="a"&&(n=!1),o!="z"&&(n=!1),u!="m"&&(n=!1)}else n=!1;return t.indexOf("addthisevent.com")==-1&&r=="aao8iuet5zp9iqw5sm9z"&&(n=!1),n},refresh:function(){var e=document.getElementsByTagName("*");for(var t=0;t<e.length;t+=1)e[t].className=="addthisevent-drop"&&(e[t].className="addthisevent");addthisevent.generate()},callcack:function(e){_ate_callback=e},setlabel:function(e,t){var n=e.toLowerCase();n=="outlook"&&(_ate_lbl_outlook=t),n=="google"&&(_ate_lbl_google=t),n=="yahoo"&&(_ate_lbl_yahoo=t),n=="ical"&&(_ate_lbl_ical=t),n=="facebookevent"&&(_ate_lbl_fb_event=t)},settings:function(e){e.license!=undefined&&(_ate_license=e.license),e.css!=undefined&&(e.css?_ate_css="true":(_ate_css="false",addthisevent.removecss())),e.mouse!=undefined&&(_ate_mouse=e.mouse),e.outlook!=undefined&&e.outlook.show!=undefined&&(_ate_show_outlook=e.outlook.show),e.google!=undefined&&e.google.show!=undefined&&(_ate_show_google=e.google.show),e.yahoo!=undefined&&e.yahoo.show!=undefined&&(_ate_show_yahoo=e.yahoo.show),e.hotmail!=undefined&&e.hotmail.show!=undefined&&(_ate_show_hotmail=e.hotmail.show),e.ical!=undefined&&e.ical.show!=undefined&&(_ate_show_ical=e.ical.show),e.facebook!=undefined&&e.facebook.show!=undefined&&(_ate_show_facebook=e.facebook.show),e.outlook!=undefined&&e.outlook.text!=undefined&&(_ate_lbl_outlook=e.outlook.text),e.google!=undefined&&e.google.text!=undefined&&(_ate_lbl_google=e.google.text),e.yahoo!=undefined&&e.yahoo.text!=undefined&&(_ate_lbl_yahoo=e.yahoo.text),e.hotmail!=undefined&&e.hotmail.text!=undefined&&(_ate_lbl_hotmail=e.hotmail.text),e.ical!=undefined&&e.ical.text!=undefined&&(_ate_lbl_ical=e.ical.text),e.facebook!=undefined&&e.facebook.text!=undefined&&(_ate_lbl_facebook=e.facebook.text),e.dropdown!=undefined&&e.dropdown.order!=undefined&&(_ate_dropdown=e.dropdown.order),e.callback!=undefined&&(_ate_callback=e.callback)}}}();return window.addEventListener?(window.addEventListener("DOMContentLoaded",function(){_d_rd=!0,addthisevent.trycss(),addthisevent.generate()},!1),window.addEventListener("load",function(){addthisevent.generate()},!1)):window.attachEvent?(window.attachEvent("onreadystatechange",function(){_d_rd=!0,addthisevent.trycss(),addthisevent.generate()}),window.attachEvent("onload",function(){addthisevent.generate()})):window.onload=function(){addthisevent.generate()},_d_rd||setTimeout(function(){addthisevent.trycss(),addthisevent.generate()},20),window.addthisevent=addthisevent,addthisevent}),define("modules/live/components/utils/adria",[],function(){if(typeof JSON=="undefined")return;JSON.parseAdria=function(e){return!e||typeof e!="string"?null:(e[0]!="{"&&(e=JSON.grdec(e)),JSON.parse(e))},JSON.gruntaunt=function(e){var t,n,r;t=1,n=e;for(;;){r=n>>t,n^=r;if(r<=1||t==8)return n;t<<=1}},JSON.grdec=function(e){var t="";for(var n=0;n<e.length;n++)t+=String.fromCharCode(JSON.gruntaunt(e.charCodeAt(n)));return t}}),define("modules/live/components/live.Core",[],function(){"use strict";var e=e||{};return e.MatchHelper={isMatchFinished:function(e){return e=+e,e===11||e===12||e===13||e===15||e===19||e===20},isMatchLive:function(e){return!this.isMatchFinished(e)&&!this.isMatchUpcoming(e)},isMatchUpcoming:function(e){return e=+e,e===-1||e===0||e===1},isMatchHalfTime:function(e){return e=+e,e===3},isMatchSuspended:function(e){return e=+e,e===11},getLogo:function(e,t){return e.s?e.s:"http://layout.int.eurosport.com/eso/i/fanion/h100_default.png"},countSetScore:function(e,t,n){var r=0,i=0,s=0;e&&t&&(s=e.length,s&&this.isMatchLive(n)&&s--);while(s--)parseInt(e[s])>parseInt(t[s])&&r++,parseInt(e[s])<parseInt(t[s])&&i++;return{home:r,away:i}}},e}),define("modules/live/components/live.adria",["jquery-full","modules/live/components/live.Core","underscore"],function(e,t,n){"use strict";function r(e){this.options={feedUrl:e.feedUrl||null,feedType:e.feedType||null,refreshInreval:e.refreshInreval||0},this._isPaused=!1,this.ondata=null,this.onerror=null}function i(e){this.options={globalFeed:e.globalFeed||null,liveFeed:e.liveFeed||null,matchFeed:e.matchFeed||null,dictFeed:e.dictFeed||null},this._feed={global:null,live:null,dict:null,match:null},this._subscribers={global:[],live:[],dict:[],match:[]},this._data={global:null,live:null,dict:null,match:null},this._nextSubscriberId=0,this._GLOBAL_FEED_REFRESH_INTERVAL=18e5,this._MATCH_FEED_REFRESH_INTERVAL=6e4,this._LIVE_FEED_REFRESH_INTERVAL=3e4,this._DIC_FEED_REFRESH_INTERVAL=0,this.options.dictFeed&&this._setupFeed(this.options.dictFeed,this._DIC_FEED_REFRESH_INTERVAL,"dict"),this.options.globalFeed&&this._setupFeed(this.options.globalFeed,this._GLOBAL_FEED_REFRESH_INTERVAL,"global"),this.options.matchFeed&&this._setupFeed(this.options.matchFeed,this._MATCH_FEED_REFRESH_INTERVAL,"match"),this.options.liveFeed&&this._setupFeed(this.options.liveFeed,this._LIVE_FEED_REFRESH_INTERVAL,"live")}r.prototype.initFeed=function(){var e=this;e.options.feedUrl&&(e.options.refreshInreval&&setInterval(function(){e._request()},e.options.refreshInreval),e._request())},r.prototype._request=function(){var t=this;if(this._isPaused)return;e.ajax({type:"GET",url:this.options.feedUrl,dataType:"text",success:t.ondata,error:t.onerror})},r.prototype.resume=function(){this._isPaused=!1},r.prototype.pause=function(){this._isPaused=!0},i.prototype._setupFeed=function(e,t,n){var i=this;this._feed[n]=new r({feedUrl:e,refreshInreval:t}),this._feed[n].ondata=function(e){i._onFeedData(JSON.parseAdria(e),n)},this._feed[n].onerror=function(e){i._onFeedError(n,e,i._data[n])},this._feed[n].initFeed()},i.prototype._onFeedData=function(e,t){var r,i=this._subscribers[t];this._data[t]=e,r=i.length;while(r--)i[r].toRemove&&i.splice(r,1);i.length&&e?n.each(i,function(t){t.listener(e.Results,e.nlr)}):this._feed[t].pause()},i.prototype._onFeedError=function(e,t,r){var i,s=this._subscribers[e];i=s.length;while(i--)s[i].toRemove&&s.splice(i,1);s.length&&n.each(s,function(n){n.onerror!==undefined&&n.onerror(e,t,r)})},i.prototype._generateSubscriberId=function(){return++this._nextSubscriberId},i.prototype.subscribe=function(e,t,n){var r=this._generateSubscriberId();return this._subscribers[e].push({id:r,listener:t,onerror:n}),this._data[e]&&t(this._data[e].Results,this._data[e].nlr),this._feed[e]&&this._feed[e]._isPaused&&this._feed[e].resume(),r},i.prototype.unsubscribe=function(e,t){var r=n.find(this._subscribers[e],function(e){return e.id===t});r.toRemove=!0},i.prototype.getNamesItem=function(e,t,r){var i=n.find(this._data[e].Names,function(e){return e.k==t})||{};return n.find(i.v,function(e){return e._==r},this)||{}},i.prototype.getURL=function(e,t,n,r){var i=this,s;return s=i.getPatternURL(t),n._60===373&&t===1&&(s+="#national"),document.location.hostname==="localhost"&&(s="/oxygen"+s+"?domain=int.eurosport.fr"),s.replace(/\{(\w):(\d+)\}/g,function(t,s,o){return s==="u"?i.getNamesItem(r,Number(o),n["_"+o]||e).u:e})},i.prototype.getPatternURL=function(e){var t="";if(this._data.dict){var r=n.find(this._data.dict.dicos[0].v.urls,function(t){return t.k==e})||{};t=r.v||""}return t},i.prototype.getStatusName=function(e){var t;if(this._data.dict){var r=n.find(this._data.dict.dicos[0].v.status,function(t){return t.k==e})||{};t=r.v||" "}return t};var s={init:function(){var n=e(".es-adria-observer-data").data("es-adria-observer"),r;n&&(typeof n=="object"?r=n:console.info("Corrupt data in es-adria-observer-data"),r&&(t.adria=new i(r)))}},o={init:function(){s.init()}};return o}),define("modules/live/components/live.Scroll",["jquery-full","base/base"],function(e,t){"use strict";var n={_screenSize:null,_prevHeaderPosition:"",init:function(){this._resizeHandler=this._resizeHandler.bind(this),this._subnavigationScrollHandler=this._subnavigationScrollHandler.bind(this),this._resetSubnavigationScrollHandler=this._resetSubnavigationScrollHandler.bind(this),this.$doc=t.elements.getDocument(),this.$win=t.elements.getWindow(),this.$subnavigationContainer=e(".live_match_nav_v8_5_v2, .live_match_nav_v8_5_bis"),this.$subnavigation=e("#live-match-nav-wrapper"),this.$content=e("#content");if(this.$subnavigationContainer.length===0||this.$subnavigation.length===0)return;t.responsive.registerMainSizeFn(this._resizeHandler)},_resizeHandler:function(t){if(this._screenSize===t.size)return;switch(t.size){case"desktop":e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),e.subscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),e.publish("SCROLL_SUBNAVIGATION.NEW"),this.$win.off("scroll.subnavigation"),this.$win.on("scroll.subnavigation",function(){e.publish("SCROLL_SUBNAVIGATION.NEW")});break;case"tablet":this.$win.off("scroll.subnavigation"),e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),this._resetSubnavigationScrollHandler();break;case"mobile":this.$win.off("scroll.subnavigation"),e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),this._resetSubnavigationScrollHandler()}this._screenSize=t.size},_subnavigationScrollHandler:function(){var t=this.$doc.scrollTop(),n=parseInt(this.$subnavigationContainer.offset().top),r=e("#top"),i=r.height(),s=r.hasClass("headerhidden");s||(n-=i);if(t>=parseInt(n)){if(!this.$subnavigation.hasClass("sticky")){s?(this.$subnavigation.css("top",0).addClass("sticky"),this._prevHeaderPosition="headerhidden"):(this.$subnavigation.css({top:i+"px"}).addClass("sticky"),this._prevHeaderPosition="headervisible"),this.$subnavigationContainer.css({"margin-bottom":"40px"});return}if(s&&this._prevHeaderPosition==="headervisible"){this._prevHeaderPosition="headerhidden",this.$subnavigation.css("top",0),this.$subnavigationContainer.css({"margin-bottom":"40px"});return}if(!s&&this._prevHeaderPosition==="headerhidden"){this._prevHeaderPosition="headervisible",this.$subnavigation.css({top:i+"px"}).addClass("sticky"),this.$subnavigationContainer.css({"margin-bottom":"40px"});return}}else this._resetSubnavigationScrollHandler()},_resetSubnavigationScrollHandler:function(){this.$subnavigation.hasClass("sticky")&&(this.$subnavigation.css({top:""}).removeClass("sticky"),this.$subnavigationContainer.css({"margin-bottom":""}))}},r={init:function(){n.init()}};return r}),define("modules/live/components/live.CyclingGraph",["jquery-full","base/base"],function(e,t){"use strict";var n=t.elements.getWindow(),r;return r={$moduleContainer:null,$timeline:null,$container_ref:null,tl_data:null,data:null,labels:null,current:null,container:null,subArea1:null,subArea2:null,graph_area:null,xScale:null,yScale:null,tip:null,timeout_tooltip:null,touchTooltipHideTimeout:null,initData:function(){var t;this.$moduleContainer=e(".live-hero-wrapper-cycling").eq(0),this.$timeline=this.$moduleContainer.find(".timeline");if(this.$timeline.length===0)return;this.tl_data=this.$timeline.data("data"),this.data=this.tl_data.infoData.points,this.labels=this.tl_data.labels},checkData:function(){return this.data===null||this.data.length===0?(this.$moduleContainer.addClass("no-graph"),!1):!0},checkGraphVisibility:function(){return this.$moduleContainer.find(".cycling-graph").is(":visible")},prepareData:function(){this.data[0].x>0&&this.data.unshift({x:0,y:data[0].y,type:2}),this.tl_data.infoData.length>0&&this.data[this.data.length-1].x<this.tl_data.infoData.length&&this.data.push({x:this.tl_data.infoData.length,y:this.data[this.data.length-1].y})},updateCurrentValue:function(e){e||(e=this.tl_data.infoData),this.current=e.finished?e.length:e.current},calcGraphArea:function(e){var t=this.$container_ref.height(),n=this.$container_ref.width(),r={screen:{left:60,right:20,top:40,bottom:5},tablet:{left:60,right:40,top:40,bottom:5},mobile:{left:5,right:5,top:1,bottom:5}},i;switch(e.size){case"desktop":i="screen";break;case"tablet":i="tablet";break;case"mobile":i="mobile"}this.graph_area={w:n,h:t,left:r[i].left,right:n-r[i].right,width:n-r[i].left-r[i].right,top:r[i].top,bottom:t-r[i].bottom,height:t-r[i].top-r[i].bottom}},updatePosition:function(e,t){var n=this.data[this.data.length-1].x;this.updateCurrentValue(t),this.subArea1.transition().duration(1e3).ease("linear").attr("width",this.xScale(this.current)-this.graph_area.left),this.subArea2.transition().duration(1e3).ease("linear").attr({x:this.xScale(this.current)-this.graph_area.left,width:this.xScale(n-this.current)})},addTooltipEvents:function(e){var t=this;e.on("mouseenter",function(e){t.tip.direction("n").attr({"class":"d3-tip"+(t.graph_area.w-t.xScale(e.x)<=220?" right":"")}).show(e,this)}).on("mouseleave",t.tip.hide).on("touchstart",function(e){var n;t.graph_area.w/2>=220?t.graph_area.w-t.xScale(e.x)<=220?n=" right":n="":n=" custom",n="d3-tip"+n,t.tip.hide().attr({"class":n}).show(d,this),clearTimeout(t.timeout_tooltip),t.timeout_tooltip=setTimeout(function(){t.tip.hide()},4e3)})},drawDotPoints:function(){var e=this.data.filter(function(e){return e.type===0&&e.description&&e.description.trim()||e.type===1||e.type===2});this.svgG.selectAll(".dot").data(e).enter().append("circle").attr({"class":"dot",cx:this.area.x(),cy:this.area.y(),r:5}),this.svgG.selectAll(".dot1").data(e).enter().append("circle").attr({"class":"dot1",cx:this.area.x(),cy:this.area.y(),r:2.5})},drawGraph:function(){var e=this,t;this.svgG=this.svg.append("g"),this.svgG.append("path").attr({"class":"area",fill:"url(#doubleGradient)",stroke:"url(#graphLineGradient)",d:this.area(this.data)}),this.svgG.append("g").attr("transform",n.width()>900?"translate("+e.graph_area.left+",0)":"translate(48,-6)").attr("class","y axis").call(this.yAxis),this.drawGrid(),this.drawDotPoints(),this.svgG.call(e.tip)},drawGrid:function(){var e=this,t=function(){e.svgG.selectAll("line.horizontalGrid").data(e.axisValues).enter().append("line").attr({"class":"horizontalGrid",stroke:"url(#graphLineGradient)",x1:e.graph_area.left,x2:e.graph_area.right,y1:function(t){return e.yScale(t)},y2:function(t){return e.yScale(t)}})},n=function(){var t=e.data.filter(function(e){return e.type>0}).map(function(e){return e.x});e.svgG.selectAll("line.verticalGrid").data(t).enter().append("line").attr({"class":"verticalGrid",stroke:"url(#graphLineGradient)",y1:e.graph_area.top,y2:e.graph_area.bottom,x1:function(t){return e.xScale(t)},x2:function(t){return e.xScale(t)}})};t(),n()},initAxisValues:function(e){var t=this,n,r=null,i=[{key:500,value:100},{key:1e3,value:250},{key:2500,value:500},{key:5e3,value:1e3},{key:9999,value:2e3}];this.domainX=this.data[this.data.length-1].x,this.domainY=e.max(this.data,function(e){return e.y});for(n=0;n<i.length;n++)if(this.domainY<i[n].key){r=i[n].value;break}r===null&&(r=e.max(i,function(e){return e.value})),this.axisValues=[0],this.domainY<500&&(this.domainY=this.domainY*3);while(this.domainY>=this.axisValues[this.axisValues.length-1])this.axisValues.push(this.axisValues[this.axisValues.length-1]+r);this.domainY=this.axisValues[this.axisValues.length-1]},initScale:function(e){this.xScale=e.scale.linear().domain([0,this.domainX]).range([this.graph_area.left,this.graph_area.right]),this.yScale=e.scale.linear().domain([this.domainY,0]).range([this.graph_area.top,this.graph_area.bottom])},initTipHTML:function(t){var n=this,r={0:{s:" ",c:"white"},1:{s:" ",c:"white"},2:{s:" ",c:"white"},4:{s:"S",c:"green"},8:{s:"HC",c:"red"},16:{s:"1",c:"red"},32:{s:"2",c:"red"},64:{s:"3",c:"red"},128:{s:"4",c:"red"},256:{s:"F",c:"blue"}};this.tip=t.tip().attr("class","d3-tip").html(function(t){var i=r[t.type].s,s="";isNaN(i)||(i=n.labels["cat."]+" "+i),i==="F"&&n.tl_data.graph_picto_feed_custom&&(i='<img src="'+n.tl_data.graph_picto_feed_custom+'"/>');if(r[t.type].c=="white"){switch(t.type){case 0:i=n.tl_data.graph_icon_info;break;case 1:i=n.tl_data.graph_icon_start;break;case 2:i=n.tl_data.graph_icon_finish}s='<img src="'+i+'"/>'}var o='<div class="symbol">'+(s?s:i)+"</div>"+'<div class="content">'+'<div class="caption">'+(t.description&&t.description.trim()||t.text)+"</div>"+'<div class="name">'+n.labels.height+'</div><div class="value">'+t.y+"m</div>"+'<div class="name">'+n.labels.length+"</div>"+'<div class="value">'+(n.tl_data.infoData.length-t.x)+"km</div>"+"</div>";return e(".d3-tip").removeClass("red blue green").addClass(r[t.type].c),o})},startD3:function(e){var t=this,n,r,i,s;this.container=e.select(".cycling-graph .container"),this.subArea1=e.select("#subArea1"),this.subArea2=e.select("#subArea2"),this.updateCurrentValue(),this.initAxisValues(e),this.initScale(e),this.svg=this.container.select("svg"),this.svg.datum(this.data).attr({width:this.graph_area.w,height:this.graph_area.h}),this.updatePosition(null,this.tl_data.infoData);var o=e.svg.area().x(function(e){return t.xScale(e.x)}).y1(function(e){return t.yScale(e.y)}).y0(this.graph_area.h-5);this.area=o,this.yAxis=e.svg.axis().scale(this.yScale).orient("left").tickValues(this.axisValues).tickFormat(function(e){return e+"m"}),this.initTipHTML(e),this.drawGraph(),this.types=[{id:4,size:23,icon:this.tl_data.graph_picto_s,css_id:1},{id:8,size:29,icon:this.tl_data.graph_picto_hc,css_id:9},{id:16,size:23,icon:this.tl_data.graph_picto_1,css_id:4},{id:32,size:23,icon:this.tl_data.graph_picto_2,css_id:5},{id:64,size:23,icon:this.tl_data.graph_picto_3,css_id:6},{id:128,size:23,icon:this.tl_data.graph_picto_4,css_id:7},{id:256,size:23,icon:this.tl_data.graph_picto_feed,css_id:8}];for(n=0;n<this.types.length;n++)r=this.types[n],i="shield shield"+r.css_id,s=this.svgG.selectAll("."+i).data(this.data.filter(function(e){return e.type==r.id})).enter().append("g").attr({"class":i,cx:o.x(),cy:o.y()}).append("image").attr({"xlink:href":r.icon,width:r.size,height:29,x:o.x(),y:o.y(),transform:"translate(-"+r.size/2+", -29)"}),this.addTooltipEvents(s);this.addWhiteTooltipEvents(this.svgG.selectAll(".dot").filter(function(e){return e.description&&e.type==0||e.type==1||e.type==2}))},addWhiteTooltipEvents:function(e){var t=this,n=t.graph_area.w;e.on("mouseenter",function(e){n-t.xScale(e.x)<=220?(t.tip.attr({"class":"d3-tip white right"}),t.tip.direction("w"),t.tip.show(e,this)):(t.tip.attr({"class":"d3-tip white"}),t.tip.direction("e"),t.tip.show(e,this))}).on("mouseleave",t.tip.hide).on("touchstart",function(e){t.tip.hide(),n/2>=220?n-xScale(e.x)<=220?(t.tip.attr({"class":"d3-tip white right"}),t.tip.direction("w"),t.tip.show(e,this)):(t.tip.attr({"class":"d3-tip white"}),t.tip.direction("e"),t.tip.show(e,this)):t.tip.attr({"class":"d3-tip white custom"}).show(e,this),clearTimeout(r.touchTooltipHideTimeout),r.touchTooltipHideTimeout=setTimeout(function(){t.tip.hide()},4e3)})},initEvent:function(n){var i=this,s=function(e){var t,r;i.xScale.range([i.graph_area.left,i.graph_area.right]),i.svg.datum(i.data).attr({width:i.graph_area.w}),n.select(".area").attr("d",i.area(i.data)),i.subArea1.attr("width",i.xScale(i.current)-i.graph_area.left),i.subArea2.attr({x:i.xScale(i.current)-i.graph_area.left,width:i.xScale(i.domainX-i.current)}),i.svgG.select(".axis.y").attr("transform",e.size==="desktop"||e.size==="tablet"?"translate("+i.graph_area.left+",0)":"translate(48,-6)"),i.svgG.selectAll("line.horizontalGrid").attr({x1:i.graph_area.left,x2:i.graph_area.right}),i.svgG.selectAll("line.verticalGrid").attr({x1:function(e){return i.xScale(e)},x2:function(e){return i.xScale(e)}}),i.svgG.selectAll(".dot, .dot1").attr({cx:i.area.x()});for(t=0;t<i.types.length;t++)r=i.types[t],i.svgG.selectAll(".shield.shield"+r.css_id).attr({cx:i.area.x()}).select("image").attr({x:i.area.x()})};t.responsive.registerMainSizeFn(s),e.subscribe("updateTimelinePosition",function(){i.updatePosition()}),e.subscribe("timelineDotEnter",function(e,t){t.touch&&(i.tip.hide(),clearTimeout(r.touchTooltipHideTimeout),r.touchTooltipHideTimeout=setTimeout(function(){i.tip.hide()},2e3)),i.svgG.selectAll(".shield").filter(function(e){return e.x==t.x}).each(function(e){i.tip.direction("n"),i.tip.attr({"class":"d3-tip"+(i.graph_area.w-i.xScale(e.x)<=200?" right":"")}).show(e,this)})}),e.subscribe("timelineDotLeave",i.tip.hide)},init:function(){var e=this;e.initData();if(!e.checkData()||!e.checkGraphVisibility())return;require(["libs/d3","libs/d3-tip"],function(n,r){n.tip=r,e.prepareData(),e.$container_ref=e.$moduleContainer.find(".container"),t.responsive.registerMainSizeFn(e.calcGraphArea.bind(e)),e.startD3(n),e.initEvent(n)})}},r}),define("modules/live/components/live.CyclingStandings",["jquery-full","base/base","knockout","underscore"],function(e,t,n,r){"use strict";var i={columns:null,columnSize:null,live:null,url:null,serverTime:null,startTime:null,standings:null,paginatedStandings:null,standingsModel:null,updateInterval:null,$cycling_standings:null,run:function(){this.$cycling_standings=e("#cycling-standings");var t={data:this.$cycling_standings.data("trialdata")||{},ajaxURL:this.$cycling_standings.data("ajaxurl")};this.live=t.data.islive,this.url=t.ajaxURL,this.serverTime=t.data.currentdatetime&&(new Date(t.data.currentdatetime)).valueOf(),this.startTime=t.data.startdatetime&&(new Date(t.data.startdatetime)).valueOf(),this.standings=t.data.trialinfos||[],this.columns=3,this.columnSize=5,this.paginatedStandings=this.paginate(this.standings),this.standingsModel={standings:n.observable(this.paginatedStandings[0]),standingsAvailable:n.observable(!!this.standings.length),totalPages:n.observable(this.paginatedStandings.length),page:n.observable(1),prevPage:function(){i.standingsModel.page()>1&&i.standingsModel.page(i.standingsModel.page()-1).standings(i.paginatedStandings[i.standingsModel.page()-1])},nextPage:function(){i.standingsModel.page()<i.paginatedStandings.length&&i.standingsModel.page(i.standingsModel.page()+1).standings(i.paginatedStandings[i.standingsModel.page()-1])}},this.updateInterval=3e4,this.standingsModel.standingsAvailable()&&(e("#live-hero").find(".timeline, .cycling-graph").hide(),this.$cycling_standings.show()),this.$cycling_standings.length&&n.applyBindings(this.standingsModel,this.$cycling_standings.get(0)),this.live&&this.startStandingsAutoUpdate(),!this.live&&this.startTime>this.serverTime&&setTimeout(this.startStandingsAutoUpdate,this.startTime-this.serverTime+this.updateInterval)},init:function(){this.run(),this.initListeners()},initListeners:function(){t.responsive.registerMainSizeFn(function(e){var t=e.size==="tablet"||e.size==="desktop"?3:1,n=i.columns;t!==n&&(i.columns=t,i.paginatedStandings=i.paginate(i.standings),i.standingsModel.page(1).totalPages(i.paginatedStandings.length).standings(i.paginatedStandings[i.standingsModel.page()-1]))})},paginate:function(e){var t=[];return r.each(e,function(e,n){var r=Math.floor(n/(i.columns*i.columnSize)),s=Math.floor((n-r*i.columns*i.columnSize)/i.columnSize);e.position=n+1,t[r]||(t[r]=[]),t[r][s]||(t[r][s]=[]),t[r][s].push(e)}),t},startStandingsAutoUpdate:function(){var t=setInterval(function(){e.get(i.url,function(e){if(e.data===undefined)return;i.live=e.data.islive,i.url=e.ajaxURL,i.serverTime=e.data.currentdatetime&&(new Date(e.data.currentdatetime)).valueOf(),i.startTime=e.data.startdatetime&&(new Date(e.data.startdatetime)).valueOf(),i.standings=e.data.trialinfos||[],i.live||clearInterval(t),i.standings.length&&(i.paginatedStandings=paginate(i.standings),i.standingsModel.standingsAvailable(!0).totalPages(i.paginatedStandings.length).page(i.standingsModel.page()>i.standingsModel.totalPages()?1:i.standingsModel.page()).standings(i.paginatedStandings[i.standingsModel.page()-1]))})},this.updateInterval)}},s={init:function(){i.init()}};return s}),define("modules/live/components/live.Dropdown",["jquery-full","helpers/helpers"],function(e,t){"use strict";var n=null,r=null,i=null,s=0,o={init:function(){this.initElements()&&(this.initEvents(),this.setActiveStanding())},initElements:function(){return n=e(".live_match_cycling_standings_v8_5"),r=n.find("#live-standing-dropdown"),i=n.find(".resultStandings > div"),r.length>0?!0:!1},initEvents:function(){r.on("change",function(t,n){var s=i.index(e(n.selected.data("standingId")));o.setActiveStanding(s);var u=n.selected.find(".dropdown-block-list__image--tshirt");u.length>0?r.find(".dropdown-block__dropdown-icon").html(u.clone()):r.find(".dropdown-block__dropdown-icon").html("")})},setActiveStanding:function(e){var n=e!==undefined?e:s,r=i.eq(n);r.show(),i.not(r).hide(),t.lazyload.reflowIn(r),s=n}},u={init:function(){o.init(),e.subscribe("subnavigation.tabInit:Dropdown",function(){o.init()})}};return u}),define("modules/live/components/live.FocalPoint",["jquery-full","base/base","modules/live/components/live.Core","underscore"],function(e,t,n,r){"use strict";function i(e){this.options={liveHeroData:e.liveHeroData||{},pictureAjaxURL:e.pictureAjaxURL||"",pictureBaseURL:e.pictureBaseURL||""},this.$heroImg=null,this.screenSize=null,this.heroImageBackgrounUrl="",this.heroImageOffset=""}n.FocalPoint=i,i.prototype.init=function(){this.$heroImg=e(".hero-image, .livehero__image"),this.screenSize=t.responsive.getMainSize(),this._pictureTimestamp=null,this._setLiveHero()},i.prototype.getObservable=function(){return this.options.observable},i.prototype._setLiveHero=function(){var t=this;if(this.screenSize==="mobile"&&e(".livehero__image").length===0)return;this._setHeroImage(this.options.liveHeroData||{});if(this.options.pictureAjaxURL){var n=setInterval(function(){t._requestPicture(t._pictureTimestamp||"")},6e4);e.subscribe("terminate-live-feed",function(){clearInterval(n)})}},i.prototype._requestPicture=function(t){e.ajax({type:"GET",url:this.options.pictureAjaxURL+t,dataType:"json",success:r.bind(this._setHeroImage,this),error:r.bind(this._requestPictureError,this)})},i.prototype._setHeroImage=function(t){var n=this,r=e(".hero-image, .livehero__image"),i=null;if(t.url&&this.$heroImg.css("background-image").indexOf(t.url)<0){switch(this.screenSize){case"desktop":i=1600;break;case"tablet":i=1300;break;case"mobile":i=600}i&&(t.url=t.url.indexOf("?")!==-1?t.url+("&w="+i):t.url+("?w="+i));var s=t.url.indexOf("http")===-1?n.options.pictureBaseURL+t.url:t.url;n._pictureTimestamp=t.timestamp;var o=new Image;if(document.location.host==="localhost"){var u=document.createElement("a");u.href=s;var a=u.host.indexOf("int.");a!==-1&&(u.host=u.host.slice(0,a)+u.host.slice(a+4),s=u.href),console.log("img url is ",s)}o.onload=function(){var e=1;o.width===i&&(e=i/(t.pictureWidth>0?t.pictureWidth:1600)),n.heroImageBackgrounUrl="url('"+s+"')",n.heroImageBackgrounUrl.toLowerCase()!==r.css("backgroundImage").toLowerCase()&&n._applyFocalPoint(r,t.focalpointx*e,t.focalpointy*e,o.width,o.height)},o.src=s}},i.prototype._applyFocalPoint=function(e,t,n,i,s){var o="center center";if(r.isNumber(n)&&n>=0){var u=parseInt(e.height(),10),a=parseInt(e.width(),10),f=u/s,l=a/i;f>l?(i*=f,s*=f,n*=f):(i*=l,s*=l,n*=l);if(u<=s&&n<=s){var c=u/3-n;c>0?c=0:c<0&&c+s<u&&(c=u-s);if(c<=0){var h=s-u,p=0;h>0?p=Math.abs(c)*100/h:n>s/2&&(p=100),o="center "+Math.round(p)+"%"}}}this.heroImageOffset=o,e.css({opacity:"0.15","background-position":this.heroImageOffset,"background-image":this.heroImageBackgrounUrl}),e.fadeTo(800,1)},i.prototype._requestPictureError=function(e){};var s={init:function(){var t=e(".es-focal-point-data").data("es-focal-point"),r;if(t){var i=e("#live-hero, #live-hero-tennis, .livehero__image");i.length>0&&(r=new n.FocalPoint(t),r.init())}}},o={init:function(){s.init()}};return o}),define("modules/live/components/live.Pelotons",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s,o,u,a,f={setOptions:function(e){this.options={target:e.target,initialData:e.initialData,ajaxURL:e.ajaxURL,ajaxCheckURL:e.ajaxCheckURL,status:e.status,localization:e.localization}},initPelotonData:function(n){this.setOptions(n),this.GROUP_CONFIG={},this.GROUP_CONFIG[a.HEAD]={name:n.localization.head,maxBicycles:5},this.GROUP_CONFIG[a.PELOTON]={name:n.localization.peloton,maxBicycles:7},this.GROUP_CONFIG[a.PURSUERS]={name:n.localization.pursuers,maxBicycles:5},this.pelotonUpdateInterval=null,this.resultsGetInterval=null,this.$peloton=e("#peloton"),this.$groups=this.$peloton.find(".groups"),this.$arrows=this.$peloton.find(".arrow"),this.$arrowsLeft=this.$peloton.find(".arrow-left"),this.$arrowsRight=this.$peloton.find(".arrow-right"),this._initObservable(this.options.initialData),this._initTooltipster(),t.responsive.registerMainSizeFn(this._resizeHandler.bind(this)),this._initDraggable()},_initObservable:function(e){var t=this._parseData(e.differences);this.observable={status:r.observable(this.options.status),groups:r.observableArray(t),groupsOffsetLeft:r.observable("0"),arrowLeftDisabled:r.observable(!1),arrowRightDisabled:r.observable(!1)},document.getElementById(this.options.target)&&r.applyBindings(this.observable,document.getElementById(this.options.target)),this.observable.status()!="past"&&(this.pelotonUpdateInterval=setInterval(i.bind(this._requestData,this),3e4))},_initDraggable:function(){var t=this,n,r=Hammer(this.$groups[0],{dragLockToAxis:!0,dragBlockHorizontal:!0}),i=function(e){var r=t._getPelotonOffset();if(r<0){var i=0,s=n+e;s>=r&&s<=i?(t.observable.groupsOffsetLeft("translateX("+s+"px)"),t.observable.arrowLeftDisabled(!1),t.observable.arrowRightDisabled(!1)):s<=r?(t.observable.groupsOffsetLeft("translateX("+r+"px)"),t.observable.arrowLeftDisabled(!1),t.observable.arrowRightDisabled(!0)):s>=i&&(t.observable.groupsOffsetLeft("translateX("+i+"px)"),t.observable.arrowLeftDisabled(!0),t.observable.arrowRightDisabled(!1))}};this._resizeHandler(),r.on("dragleft dragright",function(e){i(e.gesture.deltaX)}),r.on("dragstart",function(e){t.$groups.css("-webkit-transition","none");var r=t.$groups.css("transform")||t.$groups.css("-webkit-transform"),i=+r.split("(")[1].split(")")[0].split(",")[4];n=i||0}),r.on("dragend",function(e){t.$groups.css("-webkit-transition","-webkit-transform 1s")}),this.$arrows.off("click"),this.$arrows.on("click",function(r){var s=e(r.currentTarget).hasClass("arrow-left")?1:-1,o=t.$groups.css("transform")||t.$groups.css("-webkit-transform"),u=+o.split("(")[1].split(")")[0].split(",")[4];n=u||0,i(t._getGroupWidth()*s)})},_initTooltipster:function(){i.each(this.$groups.find(".group"),function(t){var n=e(t),r=n.data("index"),o=this.observable.groups()[r],u=this._getEventSettings(o.eventId),a={info:[],scrollClass:o.cyclists.length>5?"scroll":"",listHeader:o.isPeloton?this.options.localization.others:o.cyclists.length+" "+(o.cyclists.length>1?this.options.localization.cyclists:this.options.localization.cyclist)};o.deficit&&a.info.push({label:this.options.localization.timeGap,value:this._formatPopupDuration(o.deficit,!1)});var f=this._calculateTimeAdvance(o);f<0&&a.info.push({label:this.options.localization.timeAdvance,value:this._formatPopupDuration(f,!1)}),o.attack&&a.info.push({label:this.options.localization.attack,value:(o.attack/1e3).toFixed()+" km"}),a.cyclists=i.map(o.cyclists,function(e){var t=[];return e.generalleader&&u.jackets.generalleader&&t.push("jacket-icon "+u.jackets.generalleader),e.pointsleader&&u.jackets.pointsleader&&t.push("jacket-icon "+u.jackets.pointsleader),e.mountainleader&&u.jackets.mountainleader&&t.push("jacket-icon "+u.jackets.mountainleader),e.youngestleader&&u.jackets.youngestleader&&t.push("jacket-icon "+u.jackets.youngestleader),{imgSrc:e.isgpicture.medium,name:e.firstname[0]+"."+e.lastname,country:e.countrycode?"("+e.countrycode+")":"",team:e.team,icons:t,playerLink:e.playerlink,teamLink:e.teamlink}},this),o.total&&n.tooltipster({trigger:"click",content:s(a),contentAsHTML:!0,theme:"tooltipster-shadow",interactive:!0,position:"top",offsetX:-60,offsetY:-2})},this)},_getPelotonOffset:function(){return this.$peloton.outerWidth()-this._getGroupWidth()*this.observable.groups().length},_getGroupWidth:function(){return window.innerWidth<900?240:360},_resizeHandler:function(){var e=this._getPelotonOffset();e<0?(this.observable.groupsOffsetLeft("translateX("+e+"px)"),this.observable.arrowLeftDisabled(!1),this.observable.arrowRightDisabled(!0)):(this.observable.groupsOffsetLeft("translateX(0px)"),this.observable.arrowLeftDisabled(!0),this.observable.arrowRightDisabled(!0))},_parseData:function(e){var t=[],n=0;i.each(e,function(e,r){var s={eventId:e.eventid,name:"",isFirst:!1,leaderJacket:!1,bicycles:[],cyclists:[],leader:"",total:0,rest:"",time:"",deficit:r>0?e.deficit:0,attack:e.attack,number:e.number,isPeloton:e.number==0,including:"",diff:0},f=this._getGroupType(s.number,r),l=this._getEventSettings(e.eventid),c=this.GROUP_CONFIG[f];s.name=c.name,f==a.PURSUERS&&(n+=1,s.name+=n>1?" "+n:""),s.isFirst=r==0,s.leaderJacket=e.generalleader&&i.indexOf(i.keys(u),e.eventid.toString())>=0?"icon-font-"+l.bicycles.generalleader:"";var h=i.filter(e.players,function(e){return e.generalleader})[0]||i.first(e.players);s.leader=h&&!s.isPeloton?h.firstname+" "+h.lastname:"",s.total=e.players.length,s.total>0&&(s.rest=s.isPeloton?this.options.localization.others:s.total>1?s.total+" "+this.options.localization.cyclists:""),s.leaderJacket&&l.leaderGroupName&&(!s.isFirst||s.isPeloton)&&s.total>1&&(s.name=l.leaderGroupName),s.including=s.total>1?this.options.localization.including+" ":"";var p=this._getGroupIcons(e),d=[];p.generalleader&&d.push(l.bicycles.generalleader),p.pointsleader&&d.push(l.bicycles.pointsleader),p.mountainleader&&d.push(l.bicycles.mountainleader),p.youngestleader&&d.push(l.bicycles.youngestleader);if(s.isPeloton){var v=[],m=d.length==1?2:0;for(var g=0;g<c.maxBicycles;g++)if(g==m||g%2==0&&g!=0){var y=d.shift();y?v.push(y):v.push(o.GREY)}else v.push(o.GREY);d=v}else{var b=s.total>c.maxBicycles?c.maxBicycles:s.total;d.length==1&&s.total>1&&d.unshift(o.GREY);var w=b-d.length;for(var E=0;E<w;E++)d.push(o.GREY)}d.reverse(),s.bicycles=d,s.cyclists=e.players,t.push(s)},this);if(t.length==1){var r=i.first(t),s=this.GROUP_CONFIG[a.PELOTON].maxBicycles,f=s-r.bicycles.length;if(f)for(var l=0;l<f;l++)r.bicycles.unshift(o.GREY)}t.reverse();if(t.length){var c=i.last(t).number;i.each(t,function(e){var n=0,r=e.number;if(e.isFirst||e.deficit===0)return;var s=i.first(i.filter(t,function(e){return e.number<r&&e.deficit},this));s&&s.deficit?e.diff=e.deficit-s.deficit:e.diff=e.deficit,e.diff&&(e.time=this._formatDuration(e.diff))},this)}return t},_padNumber:function(e,t){var n=t-e.toString().length+1;return Array(+(n>0&&n)).join("0")+e},_formatDuration:function(e){var t=new Date(e);return"+"+this._padNumber(t.getUTCHours(),2)+":"+this._padNumber(t.getUTCMinutes(),2)+"'"+this._padNumber(t.getUTCSeconds(),2)+'"'},_formatPopupDuration:function(e,t){var n="";t&&(e<0?n+="-":e>0&&(n+="+"));var r=Math.abs(e)/1e3,i=Math.floor(r/60),s=r-i*60;return i&&(n+=i+"min "),s&&(n+=s+"s"),n},_calculateTimeGap:function(e){var t=0,n=this.observable.groups(),r=i.last(n).number,s=e.number;if(r!=s){var o=i.filter(n,function(e){return e.number<=s},this),u=i.pluck(o,"deficit");t=i.reduce(u,function(e,t){return e+t},0)}return t},_calculateTimeAdvance:function(e){var t=0,n=this.observable.groups(),r=e.number,s=[];r<0?(s=i.filter(n,function(e){return e.number>r&&e.number<=0},this),t=-1):r>0&&(s=i.filter(n,function(e){return e.number<=r&&e.number>0},this),t=1);var o=i.pluck(s,"diff"),u=i.reduce(o,function(e,t){return e+t},0);return u*t},_getEventSettings:function(e){switch(e){case 703:u[703].leaderGroupName=this.options.localization.yellowGroup;break;case 704:u[704].leaderGroupName=this.options.localization.pinkGroup;break;case 740:u[740].leaderGroupName=this.options.localization.redGroup;break;default:u["-1"].leaderGroupName=""}return u[e]||u["-1"]},_getGroupType:function(e,t){return e==0?a.PELOTON:t==0?a.HEAD:a.PURSUERS},_getGroupIcons:function(e){var t={generalleader:!1,pointsleader:!1,mountainleader:!1,youngestleader:!1};return i.each(e.players,function(e){e.generalleader?t.generalleader=!0:e.pointsleader?t.pointsleader=!0:e.mountainleader?t.mountainleader=!0:e.youngestleader&&(t.youngestleader=!0)},this),t},_requestData:function(){var t=this.options.ajaxURL;e.ajax({type:"GET",url:t,dataType:"json",success:i.bind(this._success,this),error:i.bind(this._error,this)})},_success:function(e){var t=this.observable.status();e&&e.differences&&e.differences.length?(this.observable.status("live"),this.observable.groups(this._parseData(e.differences)),this._initTooltipster()):t=="live"&&(clearInterval(this.pelotonUpdateInterval),this.resultsGetInterval=setInterval(i.bind(this._requestResults,this),3e4))},_error:function(){},_requestResults:function(){var t=this.options.ajaxCheckURL;e.ajax({type:"GET",url:t,success:i.bind(this._requestResultsSuccess,this),error:i.bind(this._requestResultsError,this)})},_requestResultsSuccess:function(e){e&&(clearInterval(this.resultsGetInterval),location.reload())},_requestResultsError:function(){},initVariables:function(){s=i.template("<div class='peloton-popup'><% if (info.length) { %><div class='info'><% for (var i = 0; i < info.length; i++) { %><div><span><%- info[i].label %></span>:<span class='value'><%- info[i].value %></span></div><% } %></div><% } %><div class='numberInGroup'><%- listHeader %>:</div><ul class='cyclists <%= scrollClass %>'><% for (var i = 0; i < cyclists.length; i++) { %><li class='cyclist'><div class='photo'><a class='photo-wrapper' href='<%= cyclists[i].playerLink %>'><img src='<%= cyclists[i].imgSrc %>' class='photo-image'/></a></div><div class='description'><div><a class='name' href='<%= cyclists[i].playerLink %>'><%- cyclists[i].name %></a> <span class='country'><%- cyclists[i].country %></span></div><div class='team'><a href='<%= cyclists[i].teamLink %>'><%- cyclists[i].team %></a></div></div><div class='jackets'><% for (var j = 0; j < cyclists[i].icons.length; j++) { %><span class='<%= cyclists[i].icons[j] %>'></span><% } %></div></li><% } %></ul></div>"),o={GREY:"grey",YELLOW:"yellow",WHITE:"white",PINK:"pink",RED:"red",GREEN:"green",BLUE:"blue",RED_DOTTED:"red-dotted",BLUE_DOTTED:"blue-dotted"},u={703:{bicycles:{generalleader:o.YELLOW,pointsleader:o.GREEN,mountainleader:o.RED_DOTTED,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-yellow",pointsleader:"icon-solid icon-font-green",mountainleader:"icon-dotted icon-font-red",youngestleader:"icon-solid icon-font-white"}},704:{bicycles:{generalleader:o.PINK,pointsleader:o.RED,mountainleader:o.BLUE,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-pink",pointsleader:"icon-solid icon-font-red",mountainleader:"icon-dotted icon-font-blue",youngestleader:"icon-solid icon-font-white"}},740:{bicycles:{generalleader:o.RED,pointsleader:o.GREEN,mountainleader:o.BLUE_DOTTED,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-red",pointsleader:"icon-solid icon-font-green",mountainleader:"icon-dotted icon-font-blue",youngestleader:"icon-solid icon-font-white"}},"-1":{bicycles:{generalleader:o.YELLOW,pointsleader:o.GREY,mountainleader:o.GREY,youngestleader:o.GREY},jackets:{generalleader:"icon-solid icon-font-yellow",pointsleader:"",mountainleader:"",youngestleader:""}}},a={HEAD:"head",PELOTON:"peloton",PURSUERS:"pursuers"}},init:function(){this.initVariables();var t=e("#peloton");this.initPelotonData({target:"race-info",initialData:t.data("data"),ajaxURL:t.data("ajaxurl"),ajaxCheckURL:t.data("ajaxcheckurl"),status:t.data("status"),localization:t.data("localization")})}},l={init:function(){f.init()}};return l}),define("modules/live/components/live.ScrollPelotons",["jquery-full","base/base","underscore"],function(e,t,n){"use strict";var r={elem:{$doc:null,$win:null,$liveHero:null,$raceInfo:null},init:function(){n.bindAll(this,"_resizeHandler","_raceInfoScrollHandler","_resetRaceInfoFromSticky"),this.elem.$doc=t.elements.getDocument(),this.elem.$win=t.elements.getWindow(),this.elem.$liveHero=e("div.live-hero"),this.elem.$raceInfo=e("#race-info"),this.elem.$win.on("scroll",function(){e.publish("SCROLL_RACE_INFO")}),this.initLiveHeroScroll(),t.responsive.registerMainSizeFn(this._resizeHandler)},initLiveHeroScroll:function(){var n=t.responsive.getMainSize();n==="desktop"&&e.subscribe("SCROLL_RACE_INFO",this._raceInfoScrollHandler)},_resizeHandler:function(t){switch(t.size){case"desktop":e.unsubscribe("SCROLL_RACE_INFO",this._raceInfoScrollHandler),e.subscribe("SCROLL_RACE_INFO",this._raceInfoScrollHandler),e.publish("SCROLL_RACE_INFO");break;case"tablet":e.unsubscribe("SCROLL_RACE_INFO",this._raceInfoScrollHandler),this._resetRaceInfoFromSticky();break;case"mobile":e.unsubscribe("SCROLL_RACE_INFO",this._raceInfoScrollHandler),this._resetRaceInfoFromSticky()}},_raceInfoScrollHandler:function(){var t=this.elem.$doc.scrollTop(),n=161,r=parseInt(this.elem.$liveHero.offset().top)+parseInt(this.elem.$liveHero.outerHeight(!0)),i=this.elem.$raceInfo.outerHeight(),s=this.elem.$raceInfo.hasClass("sticky");if(this.elem.$raceInfo.hasClass("future")||this.elem.$raceInfo.hasClass("past"))return this._resetRaceInfoFromSticky(),!1;s&&(t+=i);if(t>=r-n){var o=e("#top");s||this.elem.$raceInfo.css("top",n+"px").addClass("sticky"),o.hasClass("headerhidden")?this.elem.$raceInfo.css("top",0):this.elem.$raceInfo.css("top",n+"px")}else this._resetRaceInfoFromSticky()},_resetRaceInfoFromSticky:function(){this.elem.$raceInfo.hasClass("sticky")&&this.elem.$raceInfo.css("top","").removeClass("sticky").removeClass("live-peloton-top-header-hidden")}},i={init:function(){r.init()}};return i}),define("modules/live/components/live.Timeline",["jquery-full","base/base","underscore"],function(e,t,n){"use strict";var r=null,i=null,s=null,o=null,u=null,a=null,f=null,l=null,c=null,h=null,p=null,d=null,v=null,m=null,g={initVariables:function(){r=e.now(),i=e(".timeline"),s=i.find(".start"),o=i.find(".end"),u=i.find(".info"),a=i.find(".eta"),f=i.find(".total-bar"),l=i.find(".elapsed-bar"),c=i.find(".current-dot"),h=i.data("data"),p=20,d=15e3,m={start:h.infoData.start,distance:h.infoData.length,finished:h.infoData.finished,live:h.infoData.live},i.find(".axis .end span").html(m.distance)},initEvents:function(){t.responsive.registerMainSizeFn(this.setEventDotVisibility.bind(this)),i.find(".event-dot").each(function(t,n){var r=e(n);r.on("click, mouseover",function(){var t=e(this).position().left;g.setEventDotVisibility(),t<s.width()+10&&s.hide(),t>u.width()-o.width()-10&&o.hide(),i.find(".event-dot").each(function(){var n=e(this);Math.abs(n.position().left-t)<=15&&n.addClass("covered")}),e(this).removeClass("covered")}).on("mouseenter",function(){e.publish("timelineDotEnter",[{x:e(this).data("pointx"),touch:!1}])}).on("mouseleave",function(){}),Hammer(r).on("tap",function(){e.publish("timelineDotEnter",[{x:e(this).data("pointx"),touch:!0}])})}),e(".mapGraphControls a").click(function(){e(this).is(".active")&&(e(".mapGraphControls a").toggleClass("active"),e(".raceMap, .live-hero-wrapper-cycling").toggleClass("hidden"))})},init:function(){this.initVariables(),this.generateDots(),this.initEvents(),m.finished?this.endRace():(this.updateTimeline(null,{current:h.infoData.current,elapsed:h.infoData.elapsed}),m.live?this.startRace():setTimeout(function(){this.startRace()},m.start-r+d))},generateDots:function(){n.each(h.infoData.points,function(t){var n,r;if(t.type==1||t.type>3)n=t.x/h.infoData.length*100,r=e('<div class="event-dot" data-pointx="'+t.x+'"><span class="distance">'+t.x+'</span><span class="dot"></span></div>').css("left",n+"%").appendTo(f)})},setEventDotVisibility:function(){s.show(),o.show(),i.find(".event-dot").each(function(){var t=e(this),n=t.prev(".event-dot"),r=t.position().left;n.length&&r-n.position().left<15||r<s.width()+10||r>u.width()-o.width()-10?t.addClass("covered"):t.removeClass("covered")})},startRace:function(){l.addClass("live"),c.length||(c=e('<span class="current-dot"><div class="avg"></div></span>').appendTo(f));var t=this;v=setInterval(function(){e.getJSON(h.ajaxURL,function(n){if(n.finished){g.endRace();return}e.publish("updateTimelinePosition",[n]),t.updateTimeline(null,n)})},d)},_padNumber:function(e,t){var n=t-e.toString().length+1;return Array(+(n>0&&n)).join("0")+e},updateTimeline:function(t,n){var r=n.current/m.distance*100,s=u.width(),o;if(n.elapsed>0&&n.current>0){var f=Math.floor(n.current/(n.elapsed/36e5)),h=Math.floor(m.start+n.elapsed+(m.distance-n.current)/f*60*60*1e3);if(h){var p=new Date(h);a.show().find("span").html(this._padNumber(p.getUTCHours(),2)+":"+this._padNumber(p.getUTCMinutes(),2)),c.find(".avg").html("<span>"+n.current+"km</span>"+f+" KMH AVG")}}r>=90&&c.find(".avg").animate({"margin-left":-c.find(".avg").width()},700),r>=95&&i.find(".axis .end").hide(),o=c.find(".avg").width(),i.find(".event-dot").each(function(){var t=e(this),n=s*(r/100);t.position().left>n-20&&t.position().left<n+o+20&&t.find(".distance").hide()}),l.finish().animate({width:r+"%"},1e3,"linear"),c.finish().animate({left:r+"%"},1e3,"linear",function(){i.find(".event-dot").each(function(){var t=e(this);t.position().left<c.position().left-20+parseInt(c.find(".avg").css("margin-left"),10)&&t.find(".distance").show()})})},endRace:function(){clearInterval(v),l.css("width","100%").removeClass("live"),c.css("left","100%")}},y={init:function(){g.init()}};return y}),define("modules/live/sport-cycling",["modules/live/components/live.CyclingGraph","modules/live/components/live.CyclingStandings","modules/live/components/live.Dropdown","modules/live/components/live.FocalPoint","modules/live/components/live.Pelotons","modules/live/components/live.ScrollPelotons","modules/live/components/live.Timeline"],function(e,t,n,r,i,s,o){"use strict";return{init:function(){t.init(),e.init(),n.init(),r.init(),i.init(),s.init(),o.init()}}}),define("modules/live/components/live.Match",["jquery-full","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r){"use strict";var i=function(t){this.options=e.extend({target:null,liveHeroData:{}},t),this.items=null,this.statuses={11:"past",12:"past",13:"past",15:"past",20:"past","-1":"future",0:"future",1:"future"},this.observable={isLoaded:n.observable(!1),caption:{minute:n.observable(),text:n.observable(),source:n.observable(),status:n.observable()}}};return i.prototype._onMatchData=function(n){this._applyBindings(),!r.isNull(n)&&this._liveUpdate&&(this._context=n[0].k,this._onData(n[0].v[0])),this._isPast()&&this._matchFeedId&&(t.adria.unsubscribe("match",this._matchFeedId),Date.now()-new Date(n[0].v[0].d)>864e5&&e.publish("terminate-live-feed")),this.observable.isLoaded(!0)},i.prototype._onData=function(e){this._resultsObject=e,this._parseResponse(),this._showDynamicData(),this._checkMatchStatus()},i.prototype._initViewModel=function(){n.bindingHandlers.scoreText={update:function(e,t){t()()!==undefined&&(e.textContent=t()())}},n.bindingHandlers.scoreTextSet={update:function(e,t){t()()!==undefined&&t()()!==0&&(e.textContent=t()())}}},i.prototype._applyBindings=function(){if(this._bindingsApplied)return;document.getElementById(this.options.target)&&(n.applyBindings(this.observable,document.getElementById(this.options.target)),this._bindingsApplied=!0)},i.prototype._checkMatchStatus=function(){var e=this.observable.status();e==="past"&&(this._liveUpdate=!1)},i.prototype._getMatchStatus=function(){return this.statuses[this._resultsObject.s]||"live"},i.prototype._isPast=function(){return this._getMatchStatus()==="past"},i.prototype._isLive=function(){return this._getMatchStatus()==="live"},i.prototype._isFuture=function(){return this._getMatchStatus()==="future"},i.prototype._isSuspended=function(){return this._resultsObject.s===11},i.prototype._showDynamicData=function(){e(".static-data",".live-hero").hide(),e(".dynamic-data",".live-hero").show(),e(".static-data","#livehero").hide(),e(".dynamic-data","#livehero").show()},i}),define("modules/live/components/live.FootballMatch",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore","modules/live/components/live.Match"],function(e,t,n,r,i,s){"use strict";function o(t){s.call(this,t),this.options=e.extend({target:null,picture:""},t),this.items=null,this.actionTypes={7:{name:"penaltyGoal"},9:{name:"ownGoal"},10:{name:"goal"},11:{name:"yellowCard"},12:{name:"redCard"},8:{name:"substitutionIn"},14:{name:"substitutionOut"},16:{name:"rugbyGoal"},18:{name:"rugbyGoal"},19:{name:"rugbyGoal"},22:{name:"rugbyGoal"},15:{name:"rugbyGoal"}},this.sportSettings={22:{periods:[{minutes:45,axisPoint:0,range:[0,45]},{minutes:45,axisPoint:45,range:[46,90]},{minutes:30,axisPoint:90,range:[91,120]}],minPeriods:2,totalMinutes:{min:90,max:120},progressBarActions:[7,9,10,11,12,8,14],progressBarGoalsHighlight:[7,9,10],statuses:{2:1,3:2,4:2,6:3,7:3},goals:[7,10],ownGoals:[9],penalty:[7],cards:[11,12]},44:{periods:[{minutes:40,axisPoint:0,range:[0,40]},{minutes:40,axisPoint:40,range:[41,80]}],minPeriods:2,totalMinutes:{min:80,max:80},progressBarActions:[11,16,19,22,15],progressBarGoalsHighlight:[16],statuses:{2:1,3:1,4:2,6:3,7:3},goals:[16,19,22,15],ownGoals:[],cards:[]}},this._localization=t.localization,this._initObservable(),this._initViewModel(),this._liveUpdate=!0,this._matchFeedId=n.adria.subscribe("match",e.proxy(this._onMatchData,this),e.proxy(this._onMatchDataError,this)),this._pictureTimestamp=null,this._initTooltipsterActions()}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.getSportSettings=function(){return this.sportSettings[this.sportId]||this.sportSettings[22]},o.prototype._initObservable=function(){var e=this;i.extend(this.observable,{status:r.observable(),minute:r.observable(),scoreHome:r.observable(),scoreAway:r.observable(),scorersHome:r.observableArray([]),scorersHomeFouls:r.observableArray([]),scorersAway:r.observableArray([]),scorersAwayFouls:r.observableArray([]),scorersAwayMobile:r.observableArray([]),groupedActionsHome:r.observableArray([]),groupedActionsAway:r.observableArray([]),progressBarPoints:r.observableArray([]),timeline:r.observableArray([]),isLoaded:r.observable(!1)}),this.observable.liveHeroCSS=r.computed(function(){var t=[e.observable.status()];return e._context&&t.push(e._hasProgressBar()?"has-progress-bar":""),t.join(" ")}),this.observable.matchStatusCSS=r.computed(function(){return e.observable.status(),"heromatch--"+e.observable.status()})},o.prototype._onMatchDataError=function(t,n,r){if(r)return;var i=e("#live-match-nav-wrapper").length&&e("#live-match-nav-wrapper").data("match-status-id");i?(this.observable.status(this.statuses[i]),this.observable.isLoaded(!0),console.log(t+" feed error, match status taken from subnav")):console.log(t+" feed error, match status is uknown")},o.prototype._parseResponse=function(){this.sportId=this._context._0;var e=this._resultsObject;this.observable.caption.status(n.adria.getStatusName(e.s)),e.s==3&&(e.pm=0);var t=this._resultsObject.r;this._actions=this._parseActions(),this.observable.status(this.statuses[e.s]||"live"),this.observable.minute(this._calculateStatusMinute()),this.observable.scoreHome(t&&t.s1),this.observable.scoreAway(t&&t.s2),this.observable.scorersHome(this._getScorers("home")),this.observable.scorersAway(this._getScorers("away")),this.observable.scorersHomeFouls(this._getScorersFouls("home")),this.observable.scorersAwayFouls(this._getScorersFouls("away")),this.sportId=="44"&&(this.observable.groupedActionsHome(this._getGroupedActions("home")),this.observable.groupedActionsAway(this._getGroupedActions("away")),this._initTooltipsterGroupedActions()),this._hasProgressBar()&&(this.observable.timeline(this._getTimelineData()),this._initTooltopsterDots())},o.prototype._parseActions=function(){var t=this._resultsObject.r,r=[];for(var s in this.actionTypes)r.push(+s);var o=[];try{o=i.map(["n1","n2"],function(s){return i.chain(t[s].a).filter(function(e){return i.indexOf(r,e.at)>=0},this).map(function(t){var r=e.trim(n.adria.getNamesItem("match",1,t._).n),i=r,s=r&&r.split(" ");return s.length>=2&&(s[0]=s[0][0]+".",i=s.join(" ")),{minute:t.m,actionType:t.at,name:r,nameShort:i,_:t._,__:1}},this).sortBy(function(e){return e.minute},this).value()},this)}catch(u){o=[[],[]]}return i.object(["home","away"],o)},o.prototype._getScorers=function(e){var t=this.getSportSettings(),r=this._actions[e],s=e=="home"?"away":"home",o=i.filter(this._actions[s],function(e){return i.indexOf(t.ownGoals,e.actionType)>=0},this);return r=i.filter(r,function(e){return i.indexOf(t.goals,e.actionType)>=0},this),r=i.sortBy(r.concat(o),function(e){return e.minute},this),r=i.map(r,function(e){var r=i.extend({},this._context,{_1:e._}),s=i.indexOf(t.ownGoals,e.actionType)>=0?this._localization.actionTypes[e.actionType][0]:"",o=i.indexOf(t.penalty,e.actionType)>=0?this._localization.actionTypes.p:"";return i.extend({},e,{url:n.adria.getURL(e._,e.__,r,"match"),minute:e.minute+"'"+s+o,time:e.minute,ownGoal:s})},this),r=i.groupBy(r,function(e){return e._},this),r=i.sortBy(i.values(r),function(e){return e[0].time},this),i.map(r,function(e){var t=i.extend({},e[0]),n=i.pluck(e,"minute");return t.minute=n.join(", "),t},this)},o.prototype._getScorersFouls=function(e){var t=this.getSportSettings(),r=this._actions[e];return r=i.filter(r,function(e){return i.indexOf(t.cards,e.actionType)>=0},this),r=i.sortBy(r,function(e){return e.minute},this),r=i.map(r,function(e){var t=i.extend({},this._context,{_1:e._});return i.extend({},e,{url:n.adria.getURL(e._,e.__,t,"match"),minute:" "+e.minute+"' ",time:e.minute,card:e.actionType===11?"card--yellow":e.actionType===12?"card--red":" "})},this),r},o.prototype._getGroupedActions=function(e){var t=this._actions[e];t=i.filter(t,function(e){return e.actionType==16||e.actionType==18||e.actionType==22||e.actionType==19||e.actionType==15},this),i.each(t,function(e){e.url=n.adria.getURL(e._,e.__,this._context,"match")},this),t.reverse();var r=i.groupBy(t,"actionType",this);return r=i.sortBy(r,function(e,t){var n={16:1,18:2,22:3,19:4,15:5};return n[t]},this),i.map(r,function(e){return{total:e.length,name:e.length>1?this._localization.actionTypes[e[0].actionType][1]||this._localization.actionTypes[e[0].actionType][0]:this._localization.actionTypes[e[0].actionType][0],data:i.map(e,function(e){return{minute:e.minute,nameShort:e.nameShort,url:e.url}})}},this)},o.prototype._hasProgressBar=function(){return i.indexOf([22,44],this.sportId)>=0},o.prototype._getTimelineData=function(){var e=[],t=this._resultsObject,n=this.getSportSettings(),r,s;t.sm>n.totalMinutes.min?(s=3,r=n.totalMinutes.max):(s=2,r=n.totalMinutes.min);var o=Array.prototype.concat(this._actions.home,this._actions.away);o=i.filter(o,function(e){return i.indexOf(n.progressBarActions,e.actionType)>=0},this),o=i.groupBy(o,function(e){return e.minute},this),this.progressBarPoints=o;var u=i.bind(function(e,t,r,s){var o=i.find(s,function(e){return i.indexOf(n.progressBarGoalsHighlight,e.actionType)>=0},this),u=(e-t)*100/r;return u=u>98.5?98.5:u,{minute:e,left:u+"%",goalIcon:o?"goal":""}},this);for(var a=0;a<s;a++){var f=n.periods[a].minutes,l={};l.width=f*100/r+"%",l.points=[],i.each(o,function(e,t){t>=n.periods[a].range[0]&&t<=n.periods[a].range[1]&&l.points.push(u(t,n.periods[a].range[0],f,e))},this),l.axisPoints=[{value:n.periods[a].axisPoint}],l.elapsed={width:"100%",display:"none",right:"auto"},e.push(l)}var c=i.last(e);c.axisPoints.push({value:r});var h=n.periods[e.length-1].range[0],p=n.periods[e.length-1].minutes;i.each(o,function(e,t){t>=r&&c.points.push(u(t,h,p,e))},this);if(this.observable.status()=="live"){var d=(n.statuses[t.s]||n.minPeriods)-1;i.each(e,function(e,r){e.elapsed.width="0";if(r<d)e.elapsed.width="100%",e.elapsed.display="none",e.elapsed.right="auto";else if(r==d){var i=n.periods[r].minutes,s=t.pm<=i?t.pm:i,o=s*98/i;e.elapsed.width=o+"%",e.elapsed.display="block",e.elapsed.right=98-o+"%"}},this)}return e},o.prototype._calculateStatusMinute=function(){var e=this._resultsObject,t=this.observable.status(),n=this.getSportSettings();if(e.s!==3||this.sportId!="44"&&this.sportId!="22"){if(n&&t=="live"){var r=e.pm||0,s=n.statuses[e.s]||n.minPeriods;return s-=1,i.reduce(n.periods.slice(0,s),function(e,t){return e+t.minutes},0,this)+r+"'"}return""}return this._localization.halfTime},o.prototype._initTooltopsterDots=function(){e("#live-hero .event-dot").not(".tooltipstered").tooltipster({trigger:"custom",contentAsHTML:!0,theme:"tooltipster-live-hero",maxWidth:350,speed:0})},o.prototype._initTooltipsterActions=function(){var n=this,r=e("#live-hero"),s=r.find(".periods"),o=e(".livecomments-wrapper").eq(0),u=54,a=t.elements.getBody(),f=i.template('<div class="inner"><div class="left-col"><span class="mins"><%= minute %></span> min<div class="icons"><% for (var i = 0; i < icons.length; i++) { %><div class="icon <%= icons[i] %>"></div><% } %></div></div><div class="copy-col"><% for (var j = 0; j < actions.length; j++) { %><div><%- actions[j].action %> <%- actions[j].player %></div><% } %></div></div>'),l=function(r){r.preventDefault();var s=e(this).data("minute"),o=n.progressBarPoints[s],u=i.map(o,function(e){return this.actionTypes[e.actionType].name},n);u=i.without(i.uniq(u),"substitutionOut");var a=i.map(o,function(e){return{action:this._localization.actionTypes[e.actionType][0],player:e.name}},n),l=f({minute:s,icons:u,actions:a});e(this).tooltipster("content",l).tooltipster("show"),t.responsive.getMainSize()=="tablet"&&e(e(this).tooltipster("elementTooltip")).on("click touchend",i.bind(h,this))},c=function(t){e(this).tooltipster("hide")},h=function(n){n.preventDefault();var i=e(this).data("minute"),s=o.find(".livecomments-comment[data-minute="+i+"]");if(s.length){o.hasClass("active")||e("#live-subnavigation .js-nav-link.live").trigger("click"),o.find(".livecomments-comment.future-scroll").length&&o.find(".livecomments-comment.future-scroll").css({transition:"none","-moz-transition":"none","-o-transition":"none"}).removeClass("future-scroll");var f=s.offset().top-(r.find("div.teams").outerHeight()+45+u),l=t.elements.getHtml().add(a);l.animate({scrollTop:Math.floor(f)},1e3)}},p=function(){s.off("mouseenter mouseleave click touchend"),a.off("click",m),t.elements.getWindow().off("scroll resize",m)},d=function(e){e.preventDefault(),h.call(this,e)},v=function(t){t.preventDefault(),t.stopPropagation(),i.isUndefined(e(this).tooltipster("elementTooltip"))?(a.find("> .tooltipster-live-hero").remove(),l.call(this,t)):e(e(this).tooltipster("elementTooltip")).hasClass("tooltipster-dying")?(a.find("> .tooltipster-live-hero").remove(),l.call(this,t)):e(this).tooltipster("elementTooltip").trigger("touchend click",t)},m=function(){var e=a.find("> .tooltipster-live-hero");e.length&&e.remove()},g=t.responsive.getMainSize(),y=function(e){if(e.size!=g){switch(e.size){case"desktop":p(),s.on("mouseenter",".event-dot",l),s.on("mouseleave",".event-dot",c),s.on("click",".event-dot",d);break;case"tablet":p(),s.on("click touchend",".event-dot",v),t.elements.getWindow().on("scroll resize",m),a.on("click",m);break;default:}g=e.size}};y({size:null}),t.responsive.registerMainSizeFn(y)},o.prototype._initTooltipsterGroupedActions=function(){var t=function(){e(this).tooltipster("show")},n=function(){var t=i.template('<div class="inner"><% for (var i = 0; i < info.length; i++) { %><div class="action-row"><div class="left-col"><span><%= info[i].minute %></span>\'</div><% if (info[i].nameShort) { %><div class="copy-col"><a href="<%= info[i].url %>"> <%= info[i].nameShort %> </a></div><% } %></div><% } %></div>'),n=e(this).data("info"),r=t({info:n});return r};e(".actions-info").not(".tooltipstered").tooltipster({contentAsHTML:!0,theme:"tooltipster-live-hero rugby",interactive:!0,onlyOne:!0,functionInit:n,functionReady:t,position:"bottom"})};var u={init:function(){if(typeof n.adria!="undefined"){var t=e(".es-football-match-data").data("es-football-match"),r;t&&(typeof t=="object"?r=t:console.info("Corrupt data in es-football-match-data"),r&&new o(r))}}},a={init:function(){u.init()},constructorFunc:o};return a}),define("modules/live/components/live.TeamComposition",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s={options:{target:null,teamsData:[]},selectedPlayer:null,isPlayerSelected:null,lastUpdateTime:null,setTeamCompoData:function(n){var i;this.options.target=n.target,this.options.teamsData=n.teamsData||[],this.selectedPlayer={id:0,name:r.observable(),country:r.observable(),position:r.observable(),birthday:r.observable(),weight:r.observable(),height:r.observable(),team:r.observable(),isHome:r.observable(),logo:r.observable(),link:r.observable(),avatar:r.observable()},this.isPlayerSelected=r.observable(!1),i=e("#team-composition-view"),i.length>0&&(r.cleanNode(i.get(0)),r.applyBindings(this,i.get(0)),this.$playerDataOverlay=e("<div class='player-data-overlay'></div>"),t.elements.getBody().append(this.$playerDataOverlay),this.$playerDataOverlay.click(function(){e(".player-data.show .close").trigger("click")}))},showPlayerInfo:function(e){var n=i.findWhere(this.options.teamsData,{id:e});if(n){this.$playerDataOverlay.show();if(t.responsive.getMainSize()==="mobile"){location.href=n.link;return}this.selectedPlayer.id=n.id,this.selectedPlayer.name(n.name),this.selectedPlayer.country(n.country),this.selectedPlayer.position(n.position),this.selectedPlayer.birthday(n.birthday),this.selectedPlayer.weight(n.weight),this.selectedPlayer.height(n.height),this.selectedPlayer.team(n.team),this.selectedPlayer.isHome(n.isHome),this.selectedPlayer.logo(n.logo),this.selectedPlayer.link(n.link),this.selectedPlayer.avatar(n.avatar),this.isPlayerSelected(!0)}},hidePlayerInfo:function(){this.isPlayerSelected(!1),this.$playerDataOverlay.hide()},init:function(){this.run(),this.initHoverPlayer(),this.initEvents(),setInterval(this.updateActiveTeamCompo.bind(this),18e4)},initEvents:function(){var t=this;e.subscribe("teamCompositionUpdate",function(){t.hidePlayerInfo(),t.init()}),e(".teams-football.nav-link").click(function(n){n.preventDefault();var r=new Date;(r-t.lastUpdateTime).toFixed()>6e5&&!e(this).is(".active")&&!e(this).is(".updating")&&(t.lastUpdateTime=r,t.updateTeamCompo())})},updateActiveTeamCompo:function(){var t=e(".teams-football.nav-link");t.is(".active")&&(this.updateTeamCompo(),this.lastUpdateTime=new Date)},initHoverPlayer:function(){var t=e(".module-team-compo"),n=function(){t.find("[data-player-id="+e(this).data("player-id")+"]").addClass("hover")},r=function(){t.find("[data-player-id="+e(this).data("player-id")+"]").removeClass("hover")};t.length>0&&(t.find("[data-player-id]").hover(n,r),t.find("[data-player-id]").off("touchstart").on("touchstart",function(n){t.find("[data-player-id="+e(this).data("player-id")+"]").addClass("hover")}),t.find("[data-player-id]").off("touchend").on("touchend",function(n){t.find("[data-player-id="+e(this).data("player-id")+"]").removeClass("hover")}))},run:function(){var t=e(".es-team-composition-data").data("es-team-composition"),n;t&&(typeof t=="object"?n=t:console.info("Corrupt data in es-team-composition-data"),n&&this.setTeamCompoData(n))},updateTeamCompo:function(){var t=e(".es-team-composition-data"),n="live_match_team_composition_v8",r=(window.location.host==="localhost"?"http://localhost:2446":"")+t.data("ajax-url"),i=e("."+n),s=e(".teams-football.nav-link");s.addClass("updating"),i.addClass("loading"),e.get(r).done(function(t){s.removeClass("updating"),e(t).find(".tab-content").addClass("active"),i.removeClass("loading").html(e(t).find("."+n).html()),e.publish("teamCompositionUpdate")}).fail(function(){console.info("Failed to fetch updated team composition info"),i.removeClass("loading"),s.removeClass("updating")})}},o={init:function(){s.init(),e.subscribe("subnavigation.tabInit:TeamComposition",function(){s.init()})}};return o}),define("modules/live/components/live.TeamStats",["jquery-full","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r){"use strict";function i(e){this.options={playersData:e.playersData},this.resultObj=null,this.stats=null,this.isHaveStats=null,this.shootPositions=null,this.highlights=null,this.showHighlights=null,this.filters=null,this.actionId=0,this.selectedTeam={home:null,away:null},this.scaleFactor={gate:{x:732/230,y:244/104},field:{x:640/240,y:500/183}},this._matchFeedId=null,this.$zone=null}i.prototype.init=function(){this.$zone=e(".live_match_team_stats_v8_5");var r=function(){return{home:n.observable(),away:n.observable()}},i=function(){return{name:n.observable(),photo:n.observable(),link:n.observable(),teamLogo:n.observable()}};this.isHaveStats=n.observable(!1),e.publish("liveSubnavigation:haveStats",!1),this.stats={possession:r(),goals:r(),penaltiesScored:r(),penaltiesMissed:r(),corners:r(),freeKicks:r(),fouls:r(),offsides:r(),yellowCards:r(),redCards:r(),saves:r(),rugbyTries:r(),rugbyConvertionScored:r(),rugbyConvertionTotal:r(),rugbyPenaltiesScored:r(),rugbyPenaltiesTotal:r(),rugbyDropGoalsScored:r(),rugbyYellowCards:r(),rugbyRedCards:r(),rugbySubstitutions:r(),rugbyConversionScoredPercents:r(),rugbyPenaltiesScoredPercents:r(),shots:r(),shotOnTarget:r(),shotAccuracy:r(),conversionRate:r(),hitPostBar:r(),shotsBlocked:r(),penalties:r()},this.shootPositions={home:{gate:n.observableArray(),field:n.observableArray()},away:{gate:n.observableArray(),field:n.observableArray()}},this.filters={goal:n.observable(!0),wide:n.observable(!0),onTarget:n.observable(!0)},this.selectedTeam={home:n.observable(!0),away:n.observable(!1)},this.highlights={good:{player:i(),goals:n.observable(),assists:n.observable(),shots:n.observable(),saves:n.observable()},bad:{player:i(),redCards:n.observable(),yellowCards:n.observable(),fouls:n.observable(),ownGoals:n.observable()}},this.showHighlights=n.computed(function(){return this.highlights.good.player.name()||this.highlights.bad.player.name()},this),this._matchFeedId=t.adria.subscribe("match",this.onData.bind(this));var s=document.getElementById("team-stats-view");s&&!n.dataFor(s)&&n.applyBindings(this,s)},i.prototype.onData=function(n){if(!n)return!1;n[0].v&&(this.resultObj=n[0].v[0].r,this.resultObj.n1.s&&(this.isHaveStats(!0),e.publish("liveSubnavigation:haveStats",!0)),this.getMatchStats("home",this.resultObj.n1),this.getMatchStats("away",this.resultObj.n2),this._calculatePercentageStats(this.stats.rugbyConvertionScored,this.stats.rugbyConversionScoredPercents),this._calculatePercentageStats(this.stats.rugbyPenaltiesScored,this.stats.rugbyPenaltiesScoredPercents),this.getShootPositions("home",this.resultObj.n1,this.resultObj.n2),this.getShootPositions("away",this.resultObj.n2,this.resultObj.n1),this.getHighlights(),t.MatchHelper.isMatchFinished(n[0].v[0].s)&&this._matchFeedId&&t.adria.unsubscribe("match",this._matchFeedId)),this.initToolltips()},i.prototype._calculatePercentageStats=function(e,t){var n=e.home()||0,r=e.away()||0,i=n+r;i?(t.home(Math.floor(n/i*100)+"%"),t.away(Math.floor(r/i*100)+"%")):(t.home("0%"),t.away("0%"))},i.prototype.getMatchStats=function(e,t){this.stats.possession[e](this.getTeamStat(t,500)+"%"),this.stats.goals[e](this.getTeamStat(t,100)),this.stats.penalties[e](this.getTeamStat(t,113)),this.stats.penaltiesScored[e](this.getTeamStat(t,119)),this.stats.penaltiesMissed[e](this.stats.penalties[e]()-this.stats.penaltiesScored[e]()),this.stats.corners[e](this.getTeamStat(t,108)),this.stats.freeKicks[e](this.getTeamStat(t,110)),this.stats.fouls[e](this.getTeamStat(t,111)),this.stats.offsides[e](this.getTeamStat(t,109)),this.stats.yellowCards[e](this.getTeamStat(t,114)),this.stats.redCards[e](this.getTeamStat(t,115)),this.stats.saves[e](this.getTeamStat(t,106)),this.stats.shotOnTarget[e](this.getTeamStat(t,104)),this.stats.shotsBlocked[e](this.getTeamStat(t,120)),this.stats.hitPostBar[e](this.getTeamStat(t,101)),this.stats.shots[e](this.stats.shotOnTarget[e]()+this.getTeamStat(t,105)+this.stats.shotsBlocked[e]()),this.stats.shotAccuracy[e](this.calculateRate(this.stats.shotOnTarget[e](),this.stats.shots[e]())),this.stats.conversionRate[e](this.calculateRate(this.stats.goals[e](),this.stats.shotOnTarget[e]())),this.stats.rugbyTries[e](this.getTeamStat(t,219003)),this.stats.rugbyConvertionScored[e](this.getTeamStat(t,219004)),this.stats.rugbyConvertionTotal[e](this.stats.rugbyConvertionScored[e]()+this.getTeamStat(t,219005)),this.stats.rugbyPenaltiesScored[e](this.getTeamStat(t,219006)),this.stats.rugbyPenaltiesTotal[e](this.stats.rugbyPenaltiesScored[e]()+this.getTeamStat(t,219007)),this.stats.rugbyDropGoalsScored[e](this.getTeamStat(t,219008)),this.stats.rugbyYellowCards[e](this.getTeamStat(t,219010)),this.stats.rugbyRedCards[e](this.getTeamStat(t,219011)),this.stats.rugbySubstitutions[e](this.getTeamStat(t,219012))},i.prototype.getShootPositions=function(e,t,n){var r={gate:[],field:[]},i,s,o,u,a;i=this.getActions(t,10,"goal"),s=this.getActions(t,91,"wide"),o=this.getActions(t,92,"on-target"),u=this.getActions(t,7,"goal"),a=this.getActions(n,9,"goal own"),r.gate=r.gate.concat(o.gate,i.gate,u.gate,a.gate),r.field=r.field.concat(s.field,o.field,i.field,u.field,a.field),this.shootPositions[e].gate(r.gate),this.shootPositions[e].field(r.field)},i.prototype.getHighlights=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p;e=this.resultObj?this.getPlayerStats(this.resultObj.n1):[],t=this.resultObj?this.getPlayerStats(this.resultObj.n2):[],n=e.concat(t),p=this._getBestPlayerByStat(180,n),p.value&&(o=p.id,this.highlights.bad.ownGoals(p.value)),u=this._getBestPlayerByStat(100,n,o),a=this._getBestPlayerByStat(999,n,o),u.value?(u.value>=a.value?(s=u.id,this.highlights.good.goals(u.value)):(s=a.id,this.highlights.good.assists(a.value)),this.highlights.good.shots(this._getPlayerStatById(s,104,n))):(f=this._getBestPlayerByStat(106,n,o),s=f.id,this.highlights.good.saves(f.value)),o||(l=this._getBestPlayerByStat(115,n,s,!0),l.value?(o=l.id,this.highlights.bad.redCards(l.value),this.highlights.bad.fouls(this._getPlayerStatById(o,111,n))):(c=this._getBestPlayerByStat(114,n,s,!0),c.value?(o=c.id,this.highlights.bad.yellowCards(c.value),this.highlights.bad.fouls(this._getPlayerStatById(o,111,n))):(h=this._getBestPlayerByStat(111,n,s),h.value&&(o=h.id,this.highlights.bad.fouls(h.value))))),r=this.getPlayerInfo(s),i=this.getPlayerInfo(o),this.highlights.good.player.name(r.name),this.highlights.bad.player.name(i.name),this.highlights.good.player.photo(r.photo),this.highlights.bad.player.photo(i.photo),this.highlights.good.player.link(r.link),this.highlights.bad.player.link(i.link),this.highlights.good.player.teamLogo(r.teamLogo),this.highlights.bad.player.teamLogo(i.teamLogo)},i.prototype._getPlayerStatById=function(e,t,n){if(!e||!t||!n.length)return null;var r=0,i=n.length;for(;r<i;r++)if(n[r].p===e&&n[r]._===t)return n[r].v;return null},i.prototype._getBestPlayerByStat=function(e,t,n,r){var i=[],s=0,o,u;u=t.length;for(o=0;o<u;o++)t[o]._===e&&t[o].v>=s&&t[o].p!==n&&(t[o].v>s&&(s=t[o].v,i.length=0),i.push(t[o].p));return{id:r?this._getMostFoulsPlayerId(i,t):i.pop(),value:s}},i.prototype._getMostFoulsPlayerId=function(e,t){var n=null,r=null,i,s,o;s=t.length,o=0;while(e.length){r=e.shift();for(i=0;i<s;i++)t[i]._===111&&t[i].p===r&&t[i].v>=o&&(n=r,o=t[i].v)}return n?n:r},i.prototype.getPlayerStats=function(e){var t=r.filter(e.s,function(e){return e.hasOwnProperty("p")});return t?t:[]},i.prototype.getPlayerInfo=function(e){var n=r.find(this.options.playersData,function(t){return t.id===e})||{},i=t.adria.getNamesItem("match",2,n.team);return{name:n.name,photo:n.photo,link:n.link,teamLogo:t.MatchHelper.getLogo(i,"s")}},i.prototype.getTeamStat=function(e,t){var n=r.find(e.s,function(e){return e._===t});return n?n.v:0},i.prototype.getActions=function(e,t,n){var i=r.filter(e.a,function(e){return e.at===t&&e.hasOwnProperty("l")});return r.each(i,function(e){e._id=this.generateActionId()},this),{gate:r.map(i,function(e){return{id:e._id,type:n,coords:e.l?this.calculateGateCoords(e.l.g):{}}},this),field:r.map(i,function(e){return{id:e._id,player:this.getPlayerInfo(e._).name+" "+e.m+"'",type:n,coords:e.l?this.calculateFieldCoords(e.l.p):{}}},this)}},i.prototype.calculateGateCoords=function(e){return e&&e.x&&e.y?{y:Math.floor(e.x/this.scaleFactor.gate.y),x:Math.floor(e.y/this.scaleFactor.gate.x)}:{}},i.prototype.calculateFieldCoords=function(e){return e&&e.x&&e.y?{y:e.x>500?188:Math.floor(e.x/this.scaleFactor.field.y),x:240-Math.floor(e.y/this.scaleFactor.field.x)}:{}},i.prototype.calculateRate=function(e,t){return t?(e/t*100).toFixed(0)+"%":0},i.prototype.onFilter=function(e){this.filters[e](!this.filters[e]())},i.prototype.onTeamSelect=function(e){e==="home"?(this.selectedTeam.home(!0),this.selectedTeam.away(!1)):(this.selectedTeam.home(!1),this.selectedTeam.away(!0))},i.prototype.generateActionId=function(){return++this.actionId},i.prototype.initToolltips=function(){var t=this;this.$zone.find(".map-col .map-block .field").on("mouseover","div[data-action-id]",function(){t.$zone.find("div[data-action-id="+e(this).data("action-id")+"]").addClass("highlighted"),e(this).closest(".map-block").addClass("faded"),e(this).hasClass("tooltipstered")||e(this).tooltipster({touchDevices:!1}),e(this).tooltipster("show")}).on("mouseout","div[data-action-id]",function(){t.$zone.find("div[data-action-id="+e(this).data("action-id")+"]").removeClass("highlighted"),e(this).closest(".map-block").removeClass("faded")})};var s={$zone:null,$tab:null,$dataSource:null,initElements:function(){this.$zone=e(".live_match_team_stats_v8_5"),this.$tab=e(".stats-football.nav-link"),this.$dataSource=this.$zone.find(".es-team-stats-data")},init:function(){typeof t.adria!="undefined"&&(s.initElements(),this.$zone.length>0&&s.run())},run:function(){var e=this.$dataSource.data("es-team-stats"),t,n;e&&(typeof e=="object"?t=e:console.info("Corrupt data in es-team-stats-data"),t&&(n=new i(t),n.init()))}},o={init:function(){s.init(),e.subscribe("subnavigation.tabInit:TeamStats",function(){s.init()})}};return o}),define("modules/live/components/live.DonutChart",["jquery-full","modules/live/components/live.Core","base/base","underscore"],function(e,t,n,r){"use strict";t.DonutChart=function(t,i){require(["libs/raphael"],function(s){var o=[],u={},a=0,f=0,l=0,c=0,h=0,p=null,d=0,v=e(".module-last-results .matches-data-row ."+t);o=i;if(!v.length)return;e("#diagram-"+t).empty(),p=s("diagram-"+t,110,110);if(!o.length){p.circle(55,55,55).attr({stroke:"#eeeeee","stroke-width":1}),p.circle(55,55,40).attr({stroke:"#eeeeee","stroke-width":1});return}d=o.length,u={0:"#9fa9b7",1:"#8cd36c","-1":"#c5053c"},a=55,f=a*2,l=360/o.length,c=55,h=0;var m=r.template('<div class="match"><div class="team"><div class="logo"><img src="<%= home.logo %>" alt="<%- home.name %>" /></div><div class="name"><%- home.name %></div></div><div class="score-col"><div class="score"><%- home.score %> - <%- away.score %></div><div class="date"><%- date %></div></div><div class="team"><div class="logo"><img src="<%= away.logo %>" alt="<%- away.name %>" /></div><div class="name"><%- away.name %></div></div></div>'),g=function(e){return e*Math.PI/180},y=function(){var t=v.find("tr[data-match-id="+this.data()["match-id"]+"]");t.length&&(t.addClass("hover"),e(this[0]).tooltipster("content",m({home:{logo:t.find(".team-home-logo img").attr("src"),name:t.data("team-home"),score:t.find(".match-score .home").text()},away:{logo:t.find(".team-away-logo img").attr("src"),name:t.data("team-away"),score:t.find(".match-score .away").text()},date:t.data("match-date")})).tooltipster("show"))},b=function(){var t=v.find("tr[data-match-id="+this.data()["match-id"]+"]");t.length&&(t.removeClass("hover"),e(this[0]).tooltipster("hide"))},w=function(t,n){var r=e(t),i=r.parent("svg").offset(),s=parseInt(n.find(".tooltipster-arrow").css("left")),o=r.attr("d").split("L")[2].split("A"),u=o[0].indexOf(",")>=0?",":" ",a=o[0].trim().split(u),f=o[1].trim().split(u),l=0,c=0;e.browser.mozilla&&navigator.userAgent.indexOf("Trident")<0?(l=10,c=2):c=-8;var h=i.top+(parseInt(a[1])+parseInt(f[6]))/2-parseInt(n.height())+c,p=i.left+(parseInt(a[0])+parseInt(f[5]))/2-parseInt(n.width())/2-s+l;n.css({top:h,left:p})};for(var E=0;E<d;E++){var S=o[E],x=a*Math.cos(g(l*(E+1)-90))+55,T=a*Math.sin(g(l*(E+1)-90))+55;if(l===360)p.circle(55,55,55).attr({fill:u[S.status],stroke:"#fff"});else{var N=p.path(["M",c,h,"L",a,a,"L",x,T,"A",a,a,0,0,0,c,h]);N.attr({fill:u[S.status],stroke:"#fff","stroke-width":2}).data({"match-id":S.id}).hover(function(){n.responsive.hasSize("desktop")&&y.call(this)},function(){n.responsive.hasSize("desktop")&&b.call(this)}),e(N[0]).tooltipster({trigger:"custom",contentAsHTML:!0,speed:150,fixedWidth:400,functionBefore:function(t,n){var r=e(".tooltipster-default");r.length&&w(t,r),n()},functionReady:function(e,t){w(e,t)}})}c=x,h=T}return p.circle(55,55,40).attr({"stroke-width":0,fill:"#fff"}),p.rect(a-4,0,8,20).attr({"stroke-width":0,fill:"#fff"}),p})};var i={init:function(){this.run(),this.initEvents()},initEvents:function(){e.subscribe("teamCompositionUpdate",this.run)},run:function(){e(".es-donut-chart-data").each(function(){var n=e(this),r=n.data("es-donut-chart"),i=n.data("es-donut-chart-team"),s;r&&(typeof r=="object"?s=r:console.info("Corrupt data in es-donut-chart-data",i,r),i&&s&&new t.DonutChart(i,s))}),e(".module-last-results .matches-data-row tr.match").click(function(){location.href=e(this).data("url")})}},s={init:function(){i.init(),e.subscribe("subnavigation.tabInit:DonutChart",function(){i.init()})}};return s}),define("modules/live/sport-football",["modules/live/components/live.FootballMatch","modules/live/components/live.TeamComposition","modules/live/components/live.TeamStats","modules/live/components/live.DonutChart","modules/live/components/live.FocalPoint"],function(e,t,n,r,i){"use strict";return{init:function(){i.init(),e.init(),t.init(),n.init(),r.init()}}}),define("modules/live/components/live.Formula1LiveHeader",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s=null,o=null,u=null,a=null,f=5,l=null,c=null,h=null,p=null,d=null,v={},m=3e4,g=null,y={init:function(){this.run(),this.initListeners()},initListeners:function(){t.responsive.registerMainSizeFn(function(e){var t=e.size==="tablet"||e.size==="desktop"?2:1,n=p;t!==n&&(p=t,d=y.paginate(l),v.page(1).totalPages(d.length).standings(d[v.page()-1]),y.animateDriversDisplay(!1))}),s.find("> .tab-controls a").click(function(){e(this).is(".active")&&(s.find("> .tab-controls a").toggleClass("active"),s.find("> .race, > .raceMap").toggleClass("hidden"))})},run:function(){var t=Date.now();s=e(".live_match_f1_header_v8_5"),o=e("#f1-standings"),g=(new Date(s.find("> .race").data("fulltime"))).valueOf(),u={data:o.data("trialdata")||{},ajaxURL:o.data("ajaxurl")},a=u.ajaxURL,l=u.data.data||[],c=u.data?u.data.status:null,h=c==="live",p=2,d=y.paginate(l),v={standings:r.observable(d[0]),standingsAvailable:r.observable(!!l.length),totalPages:r.observable(d.length),page:r.observable(1),prevPage:function(){v.page()>1&&(v.page(v.page()-1).standings(d[v.page()-1]),y.animateDriversDisplay(!1))},nextPage:function(){v.page()<d.length&&(v.page(v.page()+1).standings(d[v.page()-1]),y.animateDriversDisplay(!1))}},v.standingsAvailable()&&(s.find(".race .upcoming-info .time").hide(),o.show()),o.length>0&&!r.dataFor(o[0])&&r.applyBindings(v,o.get(0)),h&&(y.animateDriversDisplay(!0),y.startStandingsAutoUpdate()),!h&&g>t&&setTimeout(y.startStandingsAutoUpdate,g-t+m),s.find(".race-details").html(""),e("#mapData").attr("data-additionalData")&&i.each(e("#mapData").attr("data-additionalData").split("\n"),function(e){s.find(".race-details").append("<p>"+e+"</p>")})},animateDriversDisplay:function(t){var n=o.find(".player"),r=0,i=n.length;if(!t){for(var r=i-1;r>=0;r--)e(n[r]).css({opacity:1});return}var s=setInterval(function(){r<i?(e(n[r]).css({opacity:1}),r++):(clearInterval(s),n=o.find(".player"),r=0,i=n.length)},150)},paginate:function(e){var t=[];return i.each(e,function(e,n){var r=Math.floor(n/(p*f)),i=Math.floor((n-r*p*f)/f);e.position=n+1,t[r]||(t[r]=[]),t[r][i]||(t[r][i]=[]),t[r][i].push(e)}),t},startStandingsAutoUpdate:function(){var t=setInterval(function(){e.get(a,function(e){h=e.status==="live",l=e.data||[],e.status==="finished"&&(y.animateDriversDisplay(!0),clearInterval(t),location.reload()),l.length&&(s.find(".race .upcoming-info .time").hide(),d=y.paginate(l),v.standingsAvailable(!0).totalPages(d.length).page(v.page()>v.totalPages()?1:v.page()).standings(d[v.page()-1]),y.animateDriversDisplay(!0))})},m)}},b={init:function(){y.init()}};return b}),define("modules/live/sport-motor",["modules/live/components/live.FocalPoint","modules/live/components/live.Formula1LiveHeader"],function(e,t){"use strict";return{init:function(){e.init(),t.init()}}}),define("modules/live/components/live.TennisMatch",["jquery-full","modules/live/components/live.Core","knockout","underscore","modules/live/components/live.Match"],function(e,t,n,r,i){"use strict";function s(n){i.call(this,n),this.options=e.extend({target:null},n),this.items=null,this._initObservable(),this._initViewModel(),this._liveUpdate=!0,this._matchFeedId=t.adria.subscribe("match",e.proxy(this._onMatchData,this),e.proxy(this._onMatchDataError,this)),this._pictureTimestamp=null}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._initObservable=function(){var e=this;r.extend(this.observable,{status:n.observable(),isLive:n.observable(),totalFirst:n.observable(0),totalSecond:n.observable(0),scoreFirst:n.observableArray([]),scoreSecond:n.observableArray([]),activeGameFirst:n.observable(""),activeGameSecond:n.observable(""),serveFirst:n.observable(0),serveSecond:n.observable(0)}),this.observable.liveHeroCSS=n.computed(function(){var t=[e.observable.status()];return t.join(" ")})},s.prototype._onMatchDataError=function(t,n,r){if(r)return;var i=e("#live-subnavigation").length&&e("#live-subnavigation").data("status");i?(this.observable.status(this.statuses[i]),this.observable.isLoaded(!0),console.log(t+" feed error, match status taken from subnav")):console.log(t+" feed error, match status is uknown")},s.prototype._parseResponse=function(){var e=this._parseScores();this.observable.status(this._getMatchStatus()),this.observable.isLive(this._isLive()),this.observable.totalFirst(e[0].setsTotal),this.observable.totalSecond(e[1].setsTotal),this.observable.scoreFirst(e[0].setsCompleted),this.observable.scoreSecond(e[1].setsCompleted),this.observable.activeGameFirst("40"),this.observable.activeGameSecond("30"),this.observable.serveFirst(this._getServe()==1),this.observable.serveSecond(this._getServe()==2)},s.prototype._parseScores=function(){var e=this._resultsObject.r,t=r.map([1,2],function(t){var n={setsCompleted:[],setsTotal:0};n.setsTotal=0;try{var i="s"+t,s="tb"+t,o=r.zip(e[i]||[],e[s]||[]);o=r.filter(o,function(e){return!r.isUndefined(e[0])&&!r.isNull(e[0])&&e[0]!=="A"},this),o=r.map(o,function(e){var t=r.isUndefined(e[1])||r.isNull(e[1])?"":e[1];return{setScore:+e[0],tiebreakScore:t,lose:0,active:0}},this),n.setsCompleted=o}catch(u){}return n},this),n=t[0].setsCompleted,i=t[1].setsCompleted;r.each(n,function(e,r){var s=i[r];if(this._isPast()||this._isLive()&&r<n.length-1)e.lose=e.setScore<s.setScore?1:0,s.lose=e.setScore>s.setScore?1:0,r===n.length-1&&this._isSuspended()&&(e.lose=0,s.lose=0);t[0].setsTotal+=s.lose,t[1].setsTotal+=e.lose,(this._isLive()||this._isSuspended())&&r==n.length-1&&(e.active=1,s.active=1)},this);if(e){var s=r.last(e.s1),o=r.last(e.s2);if(s=="A"||o=="A")t[0].setsCompleted.push({active:0,lose:s=="A"?1:0,setScore:s=="A"?"A":"",tiebreakScore:""}),t[1].setsCompleted.push({active:0,lose:o=="A"?1:0,setScore:o=="A"?"A":"",tiebreakScore:""})}return t},s.prototype._getServe=function(){return!this._isSuspended()&&this._isLive()&&this._resultsObject.r.sv||0};var o={init:function(){if(typeof t.adria!="undefined"){var n=e(".es-tennis-match-data").data("es-tennis-match"),r;n&&(typeof n=="object"?r=n:console.info("Corrupt data in es-tennis-match-data",r),r&&new s(r))}}},u={init:function(){o.init()},constructorFunc:s};return u}),define("modules/live/sport-tennis",["modules/live/components/live.TennisMatch","modules/live/components/live.FocalPoint"],function(e,t){"use strict";return{init:function(){t.init(),e.init()}}}),define("modules/live/sport-other",["modules/live/components/live.FocalPoint"],function(e){"use strict";return{init:function(){e.init()}}}),define("modules/live/components/live.SubnavigationMenu",["jquery-full","base/base","modules/live/components/live.Core","knockout","helpers/helpers"],function(e,t,n,r,i){"use strict";var s={_tabs:null,_TAB_NAMES:null,_defaultTabsPrioArray:null,_observable:null,_matchFeedId:null,_matchStatusId:null,_sportId:null,_isDefaultTabSet:!1,_url:null,_isUserCommentsActivated:!1,_isCommentsTabLoaded:!1,getTabsConfig:function(){var t={SUMMARY:"navtab_Summary",Multiplex_Results:"navtab_TodayResults",LIVE_COMMENTS:"navtab_Comments",STATISTICS:"navtab_Statistics",REVIEW:"navtab_Review",FIS:"navtab_Fis",EUROSPORT_PLAYER:"navtab_EurosportPlayer",PREVIEW:"navtab_Preview",TEAMS:"navtab_Teams",PLAYERS:"navtab_Players",BRACKET:"navtab_Bracket",START_GRID:"navtab_StartGrid",STANDING:"navtab_Standing",MATCH_RESULT:"navtab_MatchResult",USER_COMMENTS:"navtab_UserComments"},n=[{tab:null,name:t.SUMMARY,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Summary")}},{tab:null,name:t.Multiplex_Results,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:MultiplexResults")}},{tab:null,name:t.LIVE_COMMENTS,onAfterAjaxRequest:null},{tab:null,name:t.STATISTICS,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:TeamStats")}},{tab:null,name:t.REVIEW,onAfterAjaxRequest:null},{tab:null,name:t.FIS,onAfterAjaxRequest:null},{tab:null,name:t.EUROSPORT_PLAYER,onAfterAjaxRequest:function(t){var n=t.getContent().getElem();e.publish("subnavigation.tabInit:EurosportPlayer",n)}},{tab:null,name:t.PREVIEW,onAfterAjaxRequest:null},{tab:null,name:t.TEAMS,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:TeamComposition"),e.publish("subnavigation.tabInit:DonutChart")}},{tab:null,name:t.PLAYERS,onAfterAjaxRequest:null},{tab:null,name:t.BRACKET,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Brackets")}},{tab:null,name:t.START_GRID,onAfterAjaxRequest:null},{tab:null,name:t.STANDING,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Brackets")}},{tab:null,name:t.MATCH_RESULT,onAfterAjaxRequest:null},{tab:null,name:t.USER_COMMENTS,onAfterAjaxRequest:function(){s._isCommentsTabLoaded||e.publish("subnavigation.tabInit:UserComments"),s._isCommentsTabLoaded=!0}}],r={upcoming:[t.Multiplex_Results,t.LIVE_COMMENTS,t.PREVIEW,t.TEAMS,t.PLAYERS,t.MATCH_RESULT,t.FIS,t.BRACKET,t.STANDING,t.STATISTICS,t.USER_COMMENTS,t.REVIEW,t.START_GRID,t.EUROSPORT_PLAYER],live:[t.Multiplex_Results,t.LIVE_COMMENTS,t.MATCH_RESULT,t.FIS,t.STATISTICS,t.TEAMS,t.PLAYERS,t.BRACKET,t.STANDING,t.REVIEW,t.START_GRID,t.USER_COMMENTS,t.PREVIEW,t.EUROSPORT_PLAYER],cyclingPast:[t.Multiplex_Results,t.REVIEW,t.MATCH_RESULT,t.STANDING,t.LIVE_COMMENTS,t.STATISTICS,t.FIS,t.TEAMS,t.PLAYERS,t.BRACKET,t.START_GRID,t.PREVIEW,t.USER_COMMENTS,t.EUROSPORT_PLAYER],past:[t.Multiplex_Results,t.REVIEW,t.MATCH_RESULT,t.LIVE_COMMENTS,t.STATISTICS,t.FIS,t.TEAMS,t.PLAYERS,t.BRACKET,t.STANDING,t.START_GRID,t.PREVIEW,t.USER_COMMENTS,t.EUROSPORT_PLAYER]};return{TAB_NAMES:t,tabs:n,defaultTabPriorities:r}},initAvailableTabs:function(){var e=null;this._tabs=this._tabs.filter(function(t){return e=i.navTabs.getElements(t.name),e.length&&(t.tab=e[0]),t.tab!==null})},reflowTabs:function(){this._tabs=this._tabs.map(function(e){return e.tab=null,e}),this.initAvailableTabs(),this.initAjaxCallbacks(),this.initCommentsCount()},initAjaxCallbacks:function(){for(var e=0,t=this._tabs.length;e<t;e++)this._tabs[e].onAfterAjaxRequest&&this._tabs[e].tab.ajax&&this._tabs[e].tab.ajax.onAfterAjaxRequest(this._tabs[e].onAfterAjaxRequest.bind(null,this._tabs[e].tab))},subscribeToAdriaFeed:function(){var t=this;if(n.adria!==undefined)this._matchFeedId=n.adria.subscribe("match",function(e){t.setUpMatchInfo(e),t.setUpDefaultTab(),t.showScore(e),t.getTabsAjax(),t.checkFeedUnsubscribe(e)},function(n,r,i){if(i)return;var s=e("#live-match-nav-wrapper");t._matchStatusId=s.data("match-status-id"),t._sportId=s.data("match-sport-id"),t.setUpDefaultTab()});else{var r=e("#live-match-nav-wrapper");this._matchStatusId=r.data("match-status-id"),this._sportId=r.data("match-sport-id"),t.setUpDefaultTab()}},initKnockoutBindings:function(){this._observable={status:r.observable(),homeScore:r.observable(),awayScore:r.observable(),isUpcoming:r.observable(n.MatchHelper.isMatchUpcoming(+this._matchStatusId))};var t=e("#live-match-nav-wrapper .nav-score")[0];t&&r.applyBindings(this._observable,t)},setUpMatchInfo:function(e){e!==null&&(this._matchStatusId=e[0].v[0].s,this._sportId=e[0].k._0)},showScore:function(e){var t,r={};e!==null&&(this._observable.isUpcoming(n.MatchHelper.isMatchUpcoming(this._matchStatusId)),t=Math.abs(this._matchStatusId)<=1?"future":"",this._observable.status(t),e[0].v[0].r&&(e[0].v[0].r.s1&&e[0].v[0].r.s1.length||e[0].v[0].r.s2&&e[0].v[0].r.s2.length?r=n.MatchHelper.countSetScore(e[0].v[0].r.s1,e[0].v[0].r.s2,this._matchStatusId):r={home:e[0].v[0].r.s1,away:e[0].v[0].r.s2},this._observable.homeScore(r.home),this._observable.awayScore(r.away)))},checkFeedUnsubscribe:function(e){if(e===null){n.adria.unsubscribe("match",this._matchFeedId),this._matchFeedId=null;return}n.MatchHelper.isMatchFinished(this._matchStatusId)&&this._matchFeedId&&(n.adria.unsubscribe("match",this._matchFeedId),this._matchFeedId=null)},setUpDefaultTab:function(){if(this._isDefaultTabSet||document.location.hash)return;var e=this,t="";n.MatchHelper.isMatchFinished(this._matchStatusId)?(t="past",this._sportId===18&&(t="cyclingPast")):n.MatchHelper.isMatchUpcoming(this._matchStatusId)?t="upcoming":n.MatchHelper.isMatchLive(this._matchStatusId)&&(t="live"),e._tabs=e._tabs.sort(function(n,r){return e._defaultTabsPrioArray[t].indexOf(n.name)-e._defaultTabsPrioArray[t].indexOf(r.name)}),e._tabs.length>0?(e._tabs[0].tab.activate(),e._isDefaultTabSet=!0):console.error("live subnavigation: no tabs available")},getTabsAjax:function(){var t=e("#live-match-nav-tabs"),n=this;e.get({url:t.parent().data("ajax-url"),success:function(r){var s,o,u=e(r).find("#live-match-nav-tabs"),a=t.find("li a"),f=u.find("li a");s=a.text(),o=f.text();if(s===o)return;var l=t.find(".active").data("tab-content-id");u.find('[data-tab-content-id="'+l+'"]').addClass("active"),t.html(u.html()),i.navTabs.reflow(),n.reflowTabs()}})},initCommentsCount:function(){typeof LF!="undefined"&&LF.CommentCount({replacer:function(e,n){e.innerHTML=n+" "+(n===0||n===1?t.storage.labels.get("6732"):t.storage.labels.get("6731"))}})},init:function(){var t=this.getTabsConfig();this._tabs=t.tabs,this._TAB_NAMES=t.TAB_NAMES,this._defaultTabsPrioArray=t.defaultTabPriorities,this.initAvailableTabs(),this.initAjaxCallbacks(),this.initKnockoutBindings(),this.subscribeToAdriaFeed(),this.initCommentsCount(),e.subscribe("subnavigation.reflow",this.reflowTabs.bind(this))}};return{init:function(){s.init()},reflow:function(){s.reflowTabs()},isCommentsTabLoaded:function(){return s._isCommentsTabLoaded}}}),define("modules/live/live",["jquery-full","modules/live/components/utils/adria","modules/live/components/live.adria","modules/live/components/live.Scroll","modules/live/sport-cycling","modules/live/sport-football","modules/live/sport-motor","modules/live/sport-tennis","modules/live/sport-other","modules/live/components/live.SubnavigationMenu"],function(e,t,n,r,i,s,o,u,a,f){"use strict";n.init(),r.init(),f.init();var l=e(".es-adria-observer-data"),c=l.data("sport-category"),h=l.attr("data-sport-id");c!==undefined&&(c=c.toLowerCase());switch(c){case"team":s.init();break;case"sets":u.init();break;case"motor":o.init();break;default:switch(h){case"18":i.init();break;default:a.init()}}}),define("modules/live/components/live.LiveEventHeader",["modules/live/components/live.FocalPoint"],function(e){"use strict";e.init()}),define("modules/calendar-by-day/dropdown-filters",["jquery-full"],function(e){"use strict";var t={options:{},state:{_ddChosenItems:{},_selectedItems:[]},getOptions:function(t){var n={_dropdown:e(t.selector),_calendarNoDataMessage:e(t.calendarNoDataMessage||""),_enableParentHighlight:t.enableParentHighlight||!1,_eventName:t.eventName||"filter-dropdown:filter-content"};return n._ul=n._dropdown.find(".dropdown-block-list"),n},init:function(e){this.options=this.getOptions(e),this.initEvents()},reflow:function(){this.initEvents()},initEvents:function(){this.options._ul.off().on("click",function(n){var r=e(n.target).closest("li");r.length&&t.onItemClick(e(r))})},onItemClick:function(t){var n=t.parent(),r=t.data("id"),i=n.data("filter-name").toLowerCase();this.saveItemAndHighlight(i,r,t),e.publish(this.options._eventName,this.state._selectedItems)},saveItemAndHighlight:function(e,t,n){var r=this.state._ddChosenItems,i=[];r.hasOwnProperty(e)||(r[e]=[]),r[e]=[],t!=0&&r[e].push(t);for(var s in r){if(!r.hasOwnProperty(s))continue;i=i.concat(r[s])}this.state._selectedItems=i}};t.init({selector:".dropdowns-multiple .dropdown-block",calendarNoDataMessage:"#noEventsInfoMsg",enableParentHighlight:!0});var n={reflow:function(){t.reflow()},init:function(){t.init({selector:".dropdowns-multiple .dropdown-block",calendarNoDataMessage:"#noEventsInfoMsg",enableParentHighlight:!0})}};return n}),define("modules/calendar-by-day/tournament.filter",["jquery-full","underscore"],function(e,t){"use strict";function n(t){this.contentToFilter=e(t.contentToFilter),this.hideEmptyMonth=t.hideEmptyMonth,this.monthEl=e(t.monthCssPath),this.cssActive=t.cssActive||"table-generic__row--active",this.cssHidden=t.cssHidden||"table-generic__row--hidden"}n.prototype.filter=function(n){var r=this.contentToFilter,i=this,s=[].slice.call(arguments,1),o=s.length;r.removeClass(i.cssActive).addClass(i.cssHidden),r.each(function(n,r){var u=e(r).data(),a=t.values(u);t.intersection(a,s).length===o&&e(r).removeClass(i.cssHidden).addClass(i.cssActive)}),this.hideEmptyMonth&&this._hideMonth()},n.prototype._hideMonth=function(){var t=this.cssHidden,n=this.cssActive;this.monthEl.removeClass(n).addClass(t),this.monthEl.each(function(r,i){e(i).nextUntil(".table-generic__row--month").is(":visible")&&e(i).removeClass(t).addClass(n)})};var r={init:function(){var r=new n({contentToFilter:".calendar_by_day_v8_5 .table-generic__row:not(.table-generic__row--month), 								.live_match_multiplex_v8_5 .table-generic__row:not(.table-generic__row--month)",hideEmptyMonth:!0,monthCssPath:".calendar_by_day_v8_5 .table-generic__row--month, 							   .live_match_multiplex_v8_5 .table-generic__row--month"});e.subscribe("filter-dropdown:filter-content",t.bind(r.filter,r))}};return r.init(),{init:function(){r.init()}}}),define("modules/multiplex/multiplex",["jquery-full","helpers/helpers","modules/calendar-by-day/dropdown-filters","modules/calendar-by-day/tournament.filter"],function(e,t,n,r){"use strict";var i={$multiplexZones:null,dropdownAjaxStorage:{},initElements:function(){this.$multiplexZones=e(".live_match_multiplex_v8_5")},run:function(){this.initElements(),this.$multiplexZones.length>0&&this.$multiplexZones.each(function(e,n){var r={navId:"standings-season-dropdown",zoneId:n.className};if(!i.dropdownAjaxStorage.hasOwnProperty(n.className)){var s=new t.dropdownAjax;i.dropdownAjaxStorage[n.className]=s.init(r)}else i.dropdownAjaxStorage[n.className].reflow()})}};i.run(),e.subscribe("subnavigation.tabInit:MultiplexResults",function(){i.$multiplexZones.each(function(e,t){delete i.dropdownAjaxStorage[t.className]}),i.run(),n.init(),r.init()});var s={reflow:function(){i.run()}};return s}),define("modules/live/live-comments",["jquery-full","base/base","helpers/helpers"],function(e,t,n){"use strict";var r={$container:null,window:null,$content:null,$comment:null,$defaultFeed:null,$pinFeed:null,$refresh:null,$reload:null,$timer:null},i={init:{dailymotion:!1,flickr:!1,google:!1,instragram:!1,nhlvideos:!1,pinterest:!1,soundcloud:!1,spotify:!1,vimeo:!1,vine:!1,yahooscreen:!1,youtube:!1},script:{dailymotion:null,flickr:null,google:"//apis.google.com/js/plusone.js",instagram:null,nhlvideos:null,pinterest:"//assets.pinterest.com/js/pinit.js",soundcloud:null,spotify:null,vimeo:null,vine:"//platform.vine.co/static/scripts/embed.js",yahooscreen:null,youtube:null}},s={hashtag:{active:!1,container:null,elements:null,list:null,nav:null,remove:null,selected:null,status:"off"},highlight:{active:!1,button:null,comments:null,container:null,status:"off"},match:{active:!1,container:null,dropdown:null,id:null,status:"off"}},o={ajaxUrl:null,countNewComment:0,degree:45,maxTimestamp:"",timer:30,timerInterval:null},u={init:function(){r.$container=e(".live_comments_v8_5, .live_comments_v8_5_bis");var t=this;if(r.$container.length>0){u.initElement(),r.$content.length>0&&(u.initializeOptions(),u.initializeEvents(),u.initializeFilters(),u.initializeRelated()),e.getScript("http://platform.twitter.com/widgets.js");var i=r.$container.find("[data-interchange]");setTimeout(function(){n.imgInterchange.reflowIn(r.$container),n.isgInterchange.reflowIn(r.$container),n.lazyload.reflowIn(r.$container)},1e3)}},initElement:function(){r.window=t.elements.getWindow(),r.$content=r.$container.find(".livecomments-content"),r.$comment=r.$container.find(".livecomments-comment"),r.$refresh=r.$container.find(".livecomments-refresh"),r.$reload=r.$container.find(".livecomments-reload"),r.$timer=r.$container.find(".livecomments-timer"),r.$defaultFeed=r.$container.find(".livecomments-default-feed"),r.$pinFeed=r.$container.find(".livecomments-pin-feed")},initializeOptions:function(){o.ajaxUrl=r.$content.attr("data-ajax-url")},initializeEvents:function(){var e=this;this.attachScroll(),this.attachTimer(),r.$refresh.on("click",function(){u.ajaxManager()})},refreshHighlight:function(){r.$content.find(".livecomments-comment[data-highlight='1']").length>0?(s.highlight.container.removeClass("disable"),s.highlight.status="on"):(s.highlight.container.addClass("disable"),s.highlight.status="off")},refreshMatches:function(){r.$container.find(".livecomments-comment:not([data-match-id='-1'])").length>0?(s.match.container.removeClass("disable"),s.match.status="on"):(s.match.container.addClass("disable"),s.match.status="off")},refreshHashtag:function(){r.$container.find(".hashtag-element").length>0?(s.hashtag.container.removeClass("disable"),s.hashtag.status="on"):(s.hashtag.container.addClass("disable"),s.hashtag.status="off")},refreshDropdown:function(){var t=s.match.dropdown.find("li:not([data-id='-1'])"),n=r.$defaultFeed.find(".livecomments-match");t.each(function(t,r){n.filter("[data-id="+e(r).attr("data-id")+"]").length<1&&e(r).remove()}),n.each(function(n,r){t.filter("[data-id="+e(r).attr("data-id")+"]").length<1&&s.match.dropdown.find("ul").append("<li data-id="+e(r).attr("data-id")+">"+e(r).attr("data-title")+"</li>")})},initializeFilters:function(){var t=this;s.highlight.button=r.$container.find(".livecomments-filter-highlight span:first-child"),s.highlight.comments=r.$container.find(".livecomments-comment[data-highlight='1']"),s.highlight.container=r.$container.find(".livecomments-filter-highlight"),s.highlight.button.on("click",function(e){u.filterByHighlight()}),u.refreshHighlight(),s.match.container=r.$container.find(".livecomments-filter-match"),s.match.dropdown=r.$container.find(".livecomments-filter-match .custom-dropdown"),s.match.dropdown.on("change",function(e,t){var n=t.selected,r=n.attr("data-id");u.filterByMatch(r)}),u.refreshMatches(),s.hashtag.container=r.$container.find(".livecomments-filter-hashtag"),s.hashtag.elements=r.$container.find(".hashtag-element"),s.hashtag.list=r.$container.find(".livecomments-filter-hashtag-list"),s.hashtag.nav=r.$container.find(".livecomments-nav"),s.hashtag.remove=r.$container.find(".livecomments-nav-remove"),r.$container.on("click",".hashtag-element",function(){u.filterByHashtag(e(this))}),s.hashtag.remove.on("click",function(){var e=r.$content.find(".livecomments-comment"),t=r.$content.find('.livecomments-comment[data-hashtags*="'+s.hashtag.selected+'"]');t.removeClass("show"),r.$content.removeClass("active-hashtag"),s.hashtag.nav.css("display","none"),s.hashtag.active=!1,s.hashtag.selected=null,u.attachScroll(),s.hashtag.nav.css("display","none"),u.refreshHighlight(),u.refreshMatches()}),u.refreshHashtag()},initializeRelated:function(){var t=this,i=r.$container.find(".livecomments-comment");if(!!i&&i.length>0){var s=i.find("[data-interchange]");e(".live_match_nav_v8_5 a.live").on("click",function(){(!e(this).hasClass("loaded")||!e(this).hasClass("active"))&&(function(){n.imgInterchange.reflowIn(i),n.isgInterchange.reflowIn(i),n.lazyload.reflowIn(i)}.delay(1e3),e(this).addClass("loaded"))})}},ajaxManager:function(){var t=this;u.getComments(),u.getMaxTimestamp(),u.detachTimer(),o.degree+=180,r.$reload.css({"-webkit-transform":"rotate("+o.degree+"deg)","-moz-transform":"rotate("+o.degree+"deg)","-ms-transform":"rotate("+o.degree+"deg)","-o-transform":"rotate("+o.degree+"deg)",transform:"rotate("+o.degree+"deg)"}),e.ajax({dataType:"html",beforeSend:function(e,t){t.url=o.ajaxUrl,t.url+=o.ajaxUrl.indexOf("?")==-1?"?":"&",t.url+="timestamp="+o.maxTimestamp,console.log(t.url)}}).done(function(t){var i=e(t).find(".livecomments-comment"),a=e(t).find(".livecomments-hashtag"),f=e(t).find(".livecomments-match"),l=[],c=[],h=null,p=null,d=null,v=null,m=null;a.length>0&&s.hashtag.list.empty().append(a),f.each(function(t,n){console.log(n);var i=e(n).attr("data-id"),s=r.$content.find(".livecomments-match[data-id='"+i+"']");s.length>0&&e(n).replaceAll(e(s))}),i.each(function(t,i){var s=e(i).attr("data-pin")==1?!0:!1,u=e(i).clone();e(i).attr("data-deleted")=="true"?r.$content.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").remove():r.$content.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").length>0?(s&&r.$pinFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").length>0?r.$pinFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").replaceWith(u):s&&r.$pinFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").length<1?r.$pinFeed.find(".livecomments-comment").length<3&&r.$pinFeed.prepend(u):!s&&r.$pinFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").length>0&&r.$pinFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").remove(),r.$defaultFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").hasClass("scale")&&e(i).addClass("scale"),r.$defaultFeed.find(".livecomments-comment[data-id='"+e(i).attr("data-id")+"']").replaceWith(i)):(e(u).addClass("new"),e(i).addClass("new"),s&&(r.$pinFeed.find(".livecomments-comment").length==3&&r.$pinFeed.find(".livecomments-comment:last-child").remove(),r.$pinFeed.prepend(u)),r.$defaultFeed.prepend(e(i)),function(){e(u).removeClass("new"),e(i).removeClass("new")}.delay(5e3),o.countNewComment+=1);var a=e(i).add(u);n.imgInterchange.reflowIn(a),n.isgInterchange.reflowIn(a),n.lazyload.reflowIn(a)});var g=i.find("[class^='icon-font']");g.length>0&&g.each(function(t,n){e(n).empty()}),u.refreshHighlight(),u.refreshMatches(),u.refreshDropdown(),u.refreshHashtag(),s.highlight.active?(s.highlight.active=!1,u.filterByHighlight()):s.match.active?u.filterByMatch(s.match.id):s.hashtag.active&&u.filterByHashtag(s.hashtag.selected),u.attachTimer()})},attachScroll:function(){var e=this;r.window.on("scroll.live",function(e){u.callbackScroll()})},attachTimer:function(){var e=this;o.timer=31,o.timerInterval=setInterval(function(){u.timerManager()},1e3)},callbackScroll:function(){var e=this,t=r.$content.height(),i=r.window.height(),s=r.$content.offset().top,o=r.window.scrollTop();if(s+t-i<o+i){var a=r.$content.find(".scale").filter(function(e){return e<=10}),f=[],l=[],c=[];if(a.length==0)return u.detachScroll(),r.$content.removeClass("loading"),!1;u.detachScroll(),r.$content.addClass("loading"),a.removeClass("scale"),n.imgInterchange.reflowIn(a),n.isgInterchange.reflowIn(a),n.lazyload.reflowIn(a),u.attachScroll()}},detachScroll:function(){r.window.off("scroll.live")},detachTimer:function(){clearInterval(o.timerInterval)},findEmbeds:function(t){var r=this,i=e(t),s=[],o=[];n.imgInterchange.reflowIn(i),n.isgInterchange.reflowIn(i),n.lazyload.reflowIn(i)},filterByHashtag:function(t){var n=this,i=e(t).attr("data-hashtag"),o,a;s.highlight.active||(o=r.$content.find(".livecomments-comment"),a=r.$content.find('.livecomments-comment[data-hashtags*="'+i+'"]'),!a||(u.findEmbeds(a),u.detachScroll(),o.removeClass("show"),a.addClass("show"),r.$content.addClass("active-hashtag"),s.hashtag.active=!0,s.hashtag.selected=t,s.hashtag.nav.find(".livecomments-nav-hashtag").html("#"+i),s.hashtag.nav.css("display","block"),s.highlight.active&&s.highlight.button.trigger("tap"),s.highlight.container.addClass("disable"),s.highlight.status="off",s.match.container.addClass("disable"),s.match.status="off"))},filterByHighlight:function(){var e=this,t=r.$content.find(".livecomments-comment[data-highlight='1']");!s.highlight.active&&t.length>0?!t||(u.findEmbeds(t),r.$content.addClass("active-highlight"),s.highlight.active=!0,s.highlight.status="on",u.detachScroll(),s.highlight.button.addClass("active"),s.match.container.addClass("disable"),s.match.status="off",s.hashtag.container.addClass("disable"),s.hashtag.status="off"):(r.$content.removeClass("active-highlight"),s.highlight.active=!1,u.attachScroll(),s.highlight.button.removeClass("active"),u.refreshMatches(),u.refreshHashtag())},filterByMatch:function(e){var t=this,n=r.$content.find(".livecomments-comment"),i=r.$content.find('.livecomments-comment[data-match-id="'+e+'"]');e==-1||i.length<1?e!=-1?s.match.dropdown.find("[data-id='-1']").trigger("tap"):(i.removeClass("show"),r.$content.removeClass("active-match"),s.match.active=!1,s.match.id=null,u.attachScroll(),u.refreshHighlight(),u.refreshHashtag()):(u.findEmbeds(i),n.removeClass("show"),i.addClass("show"),r.$content.addClass("active-match"),s.match.active=!0,s.match.id=e,u.detachScroll(),s.highlight.container.addClass("disable"),s.highlight.status="off",s.hashtag.container.addClass("disable"),s.hashtag.status="off")},getComments:function(){r.$comment=r.$container.find(".livecomments-comment")},getNbNewComments:function(t){r.$bubbleComment=e(".live-nb-new-comments"),t?o.countNewComment==0?r.$bubbleComment.html(""):r.$bubbleComment.html(o.countNewComment):(r.$bubbleComment.html(""),o.countNewComment=0)},getMaxTimestamp:function(){var t=this,n=null;r.$comment.each(function(t,r){n=e(r).attr("data-timestamp"),o.maxTimestamp<n&&(o.maxTimestamp=n)})},refreshEmbeds:function(t){var n=this;e(t).each(function(t,r){var i=e(r).find(".livecomments-embed"),s=e(r).attr("data-type"),o=i.attr("data-url");n.on("init."+s,function(){s=="GooglePlus"?(i.addClass("g-post").attr("data-href",o),gapi.post.go()):s=="Pinterest"?i.attr("href",o):i.attr("src",o)})})},timerManager:function(){var e=this,t=r.$refresh.find(".livecomments-timer");o.timer--,o.timer<0?e.ajaxManager():t.text(o.timer)}};u.init()}),define("modules/live/live-preview",["jquery-full","base/base","libs/add-this-event"],function(e,t,n){var r={elems:{container:null},countdown:{container:null,clock:null,message:null},quickpoll:{buttons:null,circleWhiteLabel:null,circleWhiteTotal:null,container:null,labelVote:null,labelVotes:null,matchId:null,modeCookie:null,pieChart:{container:null,c1r:null,c1l:null,c2r:null,c2l:null},entity1:{container:null,percent:null,value:null,valueElement:null},entity2:{container:null,percent:null,value:null,valueElement:null},totalVotes:null},options:{},init:function(){this.elems.container=e(".live_match_preview_v8_5"),this.elems.containerReview=e(".live_match_review_v8_5");var t=this;if(this.elems.container.length>0||this.elems.containerReview.length>0)this.initElements(),this.initCountdown(),this.initQuickpoll()},initElements:function(){this.countdown.container=this.elems.container.find(".live-match-preview__countdown"),this.quickpoll.container=this.elems.container.find(".live-match-preview__quickpoll")},initCountdown:function(){var e=this;if(!!this.countdown.container&&this.countdown.container.length>0){this.countdown.clock=this.countdown.container.find(".live-match-preview__countdown-clock"),this.countdown.message=this.countdown.container.find(".live-match-preview__countdown-message");if(!!this.countdown.clock&&this.countdown.clock.length>0){var t=(new Date).getTime(),r=this.countdown.container.attr("data-unixtime"),i=(r-t)/1e3;this.countdown.clock.FlipClock(i,{clockFace:"DailyCounter",countdown:!0,showSeconds:!1,callbacks:{start:function(){e.countdown.clock.find(".days span").html(e.countdown.container.attr("data-label-days")),e.countdown.clock.find(".hours span").html(e.countdown.container.attr("data-label-hours")),e.countdown.clock.find(".minutes span").html(e.countdown.container.attr("data-label-minutes"))},stop:function(){e.countdown.container.fadeOut()}}})}n.settings({license:"a7g7i5x4pz1456kitmkp"})}},initQuickpoll:function(){var t=this;if(!!this.quickpoll.container&&this.quickpoll.container.length>0){this.quickpoll.buttons=this.quickpoll.container.find(".live-match-preview__quickpoll-button"),this.quickpoll.circleWhiteTotal=this.quickpoll.container.find(".live-match-preview__quickpoll-circle-white span:first-child"),this.quickpoll.circleWhiteLabel=this.quickpoll.container.find(".live-match-preview__quickpoll-circle-white span:last-child"),this.quickpoll.matchId=this.quickpoll.container.attr("data-match-id"),this.quickpoll.labelVote=this.quickpoll.container.attr("data-label-vote"),this.quickpoll.labelVotes=this.quickpoll.container.attr("data-label-votes"),this.quickpoll.totalVotes=parseInt(this.quickpoll.container.attr("data-total-votes"))||0,this.quickpoll.entity1.container=this.quickpoll.container.find(".live-match-preview__quickpoll-wrapper > div:first-child"),this.quickpoll.entity1.value=parseInt(this.quickpoll.entity1.container.find(".live-match-preview__quickpoll-value").attr("data-votes"))||0,this.quickpoll.entity1.valueElement=this.quickpoll.entity1.container.find(".live-match-preview__quickpoll-value span:first-child"),this.quickpoll.entity2.container=this.quickpoll.container.find(".live-match-preview__quickpoll-wrapper > div:last-child"),this.quickpoll.entity2.value=parseInt(this.quickpoll.entity2.container.find(".live-match-preview__quickpoll-value").attr("data-votes"))||0,this.quickpoll.entity2.valueElement=this.quickpoll.entity2.container.find(".live-match-preview__quickpoll-value span:first-child"),this.quickpoll.buttons.on("click",function(n){var r=e(this).attr("data-entity-id"),i=e(this).attr("data-entity-num"),s=e(this).attr("data-entity-type");t.quickpoll.modeCookie||(t.quickpoll.totalVotes++,i==1?t.quickpoll.entity1.value++:t.quickpoll.entity2.value++,e.cookie("quickpoll_match"+t.quickpoll.matchId,r,{expires:360}),t.saveVote(t.quickpoll.matchId,r,s)),t.userVote(),t.offTap(),t.quickpoll.totalVotes>1&&t.quickpoll.circleWhiteLabel.empty().html(t.quickpoll.labelVotes),e(this).addClass("active")});if(!e.cookie("quickpoll_match"+this.quickpoll.matchId))this.quickpoll.modeCookie=!1,this.userVote();else{this.quickpoll.modeCookie=!0;var n=e.cookie("quickpoll_match"+this.quickpoll.matchId);this.quickpoll.buttons.filter("[data-entity-id='"+n+"']").trigger("click")}}},initRelated:function(){var e=this},offTap:function(){this.quickpoll.buttons.each(function(t,n){e(this).off("click"),e(this).addClass("disable")})},userVote:function(){this.quickpoll.entity1.percent=Math.floor(this.quickpoll.entity1.value/this.quickpoll.totalVotes*100),this.quickpoll.entity2.percent=Math.floor(this.quickpoll.entity2.value/this.quickpoll.totalVotes*100),this.quickpoll.circleWhiteTotal.empty().html(this.quickpoll.totalVotes),this.quickpoll.totalVotes==0?(this.quickpoll.entity1.percent=0,this.quickpoll.entity2.percent=0):this.quickpoll.entity1.percent+this.quickpoll.entity2.percent<100?this.quickpoll.entity2.percent++:this.quickpoll.entity1.percent+this.quickpoll.entity2.percent>100&&this.quickpoll.entity2.percent--,this.quickpoll.entity1.valueElement.empty().html(this.quickpoll.entity1.percent),this.quickpoll.entity2.valueElement.empty().html(this.quickpoll.entity2.percent),this.quickpoll.pieChart.container=this.quickpoll.container.find("#pie_chart"),this.quickpoll.pieChart.c1r=this.quickpoll.pieChart.container.find("#c1_r p"),this.quickpoll.pieChart.c1l=this.quickpoll.pieChart.container.find("#c1_l p"),this.quickpoll.pieChart.c2r=this.quickpoll.pieChart.container.find("#c2_r p"),this.quickpoll.pieChart.c2l=this.quickpoll.pieChart.container.find("#c2_l p");if(this.quickpoll.entity1.percent>this.quickpoll.entity2.percent){this.quickpoll.pieChart.c1r.css({transform:"rotate(180deg)",MozTransform:"rotate(180deg)",WebkitTransform:"rotate(180deg)",msTransform:"rotate(180deg)"});var e=180-1.8*(this.quickpoll.entity1.percent-50)*2;this.quickpoll.pieChart.c2r.css({transform:"rotate("+e+"deg)",MozTransform:"rotate("+e+"deg)",WebkitTransform:"rotate("+e+"deg)",msTransform:"rotate("+e+"deg)"})}else if(this.quickpoll.entity1.percent<this.quickpoll.entity2.percent){var e=1.8*(this.quickpoll.entity2.percent-50)*2;this.quickpoll.pieChart.c2l.css({transform:"rotate("+e+"deg)",MozTransform:"rotate("+e+"deg)",WebkitTransform:"rotate("+e+"deg)",msTransform:"rotate("+e+"deg)"})}else this.quickpoll.pieChart.c1r.css({transform:"rotate(180deg)",MozTransform:"rotate(180deg)",WebkitTransform:"rotate(180deg)",msTransform:"rotate(180deg)"}),this.quickpoll.pieChart.c2r.css({transform:"rotate(180deg)",MozTransform:"rotate(180deg)",WebkitTransform:"rotate(180deg)",msTransform:"rotate(180deg)"}),this.quickpoll.pieChart.c2l.css({transform:"rotate(0deg)",MozTransform:"rotate(0deg)",WebkitTransform:"rotate(0deg)",msTransform:"rotate(0deg)"})},saveVote:function(n,r,i){e.ajax({url:t.storage.links.get("wsQuickpoll")+"AddAnonymousEntityVote",data:{contextEntityId:n,contextEntityType:"Match",entityVotedId:r,entityVotedType:i},dataType:"xml",type:"POST"})}};r.init()}),define("modules/live/live-promo",["jquery-full","base/base","objects/objects","helpers/helpers"],function(e,t,n,r){var i=t.elements.getDocument(),s=e(),o={init:function(){if(t.responsive.getMainSize()=="mobile")return;if(!this.initElements())return;var o=this.buildLivePromoPlayerNotif();i.one("scroll",function(){var t=s.data("notif-description"),i=s.data("notif-url");new n.notification({element:o,duration:7e5,borderColor:"player"});var u=e("<a>",{"class":"promotion-player__description",href:i,target:"_blank",text:t});u.insertBefore(o),r.imgInterchange.reflowIn(o),r.isgInterchange.reflowIn(o)})},initElements:function(){return s=e(".live-promotion-player.show"),s.length<=0||!s.hasClass("show")?!1:!0},buildLivePromoPlayerNotif:function(){var e=s.find("a"),t=e.clone();return t.find(".wrapper-interchange").removeClass("lazyload").addClass("lazyload-ok"),t}};o.init()}),define("live",function(){});